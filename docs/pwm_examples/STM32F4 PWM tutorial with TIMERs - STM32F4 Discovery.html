<!DOCTYPE html>
<!-- saved from url=(0078)http://stm32f4-discovery.net/2014/05/stm32f4-stm32f429-discovery-pwm-tutorial/ -->
<html class="js" lang="en-US" prefix="og: http://ogp.me/ns#"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script async="" src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/saved_resource"></script><script src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/cb=gapi.loaded_1" async=""></script><script src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/cb=gapi.loaded_0" async=""></script>
	
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="profile" href="http://gmpg.org/xfn/11">
	<link rel="pingback" href="http://stm32f4-discovery.net/xmlrpc.php">
	<title>STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery</title>
<script async="" src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/analytics.js"></script><script type="text/javascript" async="" src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/platform.js" gapi_processed="true"></script><script id="twitter-wjs" src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/widgets.js"></script><script>document.documentElement.className = document.documentElement.className.replace("no-js","js");</script>

<!-- This site is optimized with the Yoast SEO plugin v3.2.5 - https://yoast.com/wordpress/plugins/seo/ -->
<link rel="canonical" href="http://stm32f4-discovery.net/2014/05/stm32f4-stm32f429-discovery-pwm-tutorial/">
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery">
<style type="text/css"></style><meta property="og:description" content="In this tutorial, I will show you, how to implement PWM outputs on STM32F4xx devices. This is for a lot of people pretty hard work, but believe me, it’s quite quick and easy. I will go step by step on how to make a PWM output on specific timer. Update: I made a library for PWM, available here. STM32F4 timers They have up to 14 timers inside. Table below shows their description. You have to know, that let’s say F401 doesn’t...">
<meta property="og:url" content="http://stm32f4-discovery.net/2014/05/stm32f4-stm32f429-discovery-pwm-tutorial/">
<meta property="og:site_name" content="STM32F4 Discovery">
<meta property="article:tag" content="168MHz">
<meta property="article:tag" content="gpio">
<meta property="article:tag" content="keil">
<meta property="article:tag" content="microcontrollers">
<meta property="article:tag" content="pwm">
<meta property="article:tag" content="STM32F4 discovery">
<meta property="article:tag" content="stm32f429">
<meta property="article:tag" content="stm32f429discovery">
<meta property="article:tag" content="stm32f4xx">
<meta property="article:tag" content="Tim1">
<meta property="article:tag" content="tim10">
<meta property="article:tag" content="tim11">
<meta property="article:tag" content="tim12">
<meta property="article:tag" content="tim13">
<meta property="article:tag" content="tim14">
<meta property="article:tag" content="tim2">
<meta property="article:tag" content="tim3">
<meta property="article:tag" content="tim4">
<meta property="article:tag" content="tim5">
<meta property="article:tag" content="tim6">
<meta property="article:tag" content="Tim7">
<meta property="article:tag" content="tim8">
<meta property="article:tag" content="tim9">
<meta property="article:tag" content="timers">
<meta property="article:tag" content="uvision">
<meta property="article:section" content="STM32F4">
<meta property="article:published_time" content="2014-05-11T02:40:02+00:00">
<meta property="article:modified_time" content="2016-04-29T13:46:08+00:00">
<meta property="og:updated_time" content="2016-04-29T13:46:08+00:00">
<meta property="og:image" content="http://stm32f4-discovery.net/wp-content/uploads/pwm.png">
<meta property="og:image:width" content="688">
<meta property="og:image:height" content="475">
<!-- / Yoast SEO plugin. -->

<link rel="alternate" type="application/rss+xml" title="STM32F4 Discovery » Feed" href="http://stm32f4-discovery.net/feed/">
<link rel="alternate" type="application/rss+xml" title="STM32F4 Discovery » Comments Feed" href="http://stm32f4-discovery.net/comments/feed/">
<link rel="alternate" type="application/rss+xml" title="STM32F4 Discovery » STM32F4 PWM tutorial with TIMERs Comments Feed" href="http://stm32f4-discovery.net/2014/05/stm32f4-stm32f429-discovery-pwm-tutorial/feed/">
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/stm32f4-discovery.net\/wp-includes\/js\/wp-emoji-release.min.js?ver=53d53dbd33875cef13c905f84f448229"}};
			!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;if(!g||!g.fillText)return!1;switch(g.textBaseline="top",g.font="600 32px Arial",a){case"flag":return g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3;case"diversity":return g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,d=c[0]+","+c[1]+","+c[2]+","+c[3],g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e;case"simple":return g.fillText(h(55357,56835),0,0),0!==g.getImageData(16,16,1,1).data[0];case"unicode8":return g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i;for(i=Array("simple","flag","unicode8","diversity"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script><script src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/wp-emoji-release.min.js" type="text/javascript"></script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel="stylesheet" id="crayon-css" href="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/crayon.min.css" type="text/css" media="all">
<link rel="stylesheet" id="crayon-theme-keil-uvision-css" href="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/keil-uvision.css" type="text/css" media="all">
<link rel="stylesheet" id="crayon-font-monaco-css" href="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/monaco.css" type="text/css" media="all">
<link rel="stylesheet" id="cptch_stylesheet-css" href="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/style.css" type="text/css" media="all">
<link rel="stylesheet" id="dashicons-css" href="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/dashicons.min.css" type="text/css" media="all">
<link rel="stylesheet" id="cptch_desktop_style-css" href="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/desktop_style.css" type="text/css" media="all">
<link rel="stylesheet" id="contact-form-7-css" href="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/styles.css" type="text/css" media="all">
<link rel="stylesheet" id="cookielawinfo-style-css" href="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/cli-style.css" type="text/css" media="all">
<link rel="stylesheet" id="disqus_rcw-css" href="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/disqus_rcw.css" type="text/css" media="all">
<link rel="stylesheet" id="font-awesome-css" href="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/font-awesome.min.css" type="text/css" media="all">
<link rel="stylesheet" id="wpdm-bootstrap-css" href="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/bootstrap.css" type="text/css" media="all">
<link rel="stylesheet" id="wpdm-front-css" href="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/front.css" type="text/css" media="all">
<link rel="stylesheet" id="es-widget-css-css" href="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/es-widget.css" type="text/css" media="all">
<link rel="stylesheet" id="github-profile-display-css" href="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/github_wordpress_widget.css" type="text/css" media="all">
<link rel="stylesheet" id="responsive-lightbox-swipebox-css" href="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/swipebox.min.css" type="text/css" media="all">
<link rel="stylesheet" id="wp-polls-css" href="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/polls-css.css" type="text/css" media="all">
<style id="wp-polls-inline-css" type="text/css">
.wp-polls .pollbar {
	margin: 1px;
	font-size: 6px;
	line-height: 8px;
	height: 8px;
	background-image: url('http://stm32f4-discovery.net/wp-content/plugins/wp-polls/images/default/pollbg.gif');
	border: 1px solid #c8c8c8;
}

</style>
<link rel="stylesheet" id="yt4wp_sess-front-end-css-base-css" href="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/yt4wp-frontend.min.css" type="text/css" media="all">
<link rel="stylesheet" id="fancy-css-css" href="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/jquery.fancybox.min.css" type="text/css" media="all">
<link rel="stylesheet" id="style-css" href="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/style(1).css" type="text/css" media="all">
<link rel="stylesheet" id="responsive-css" href="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/responsive.css" type="text/css" media="all">
<link rel="stylesheet" id="jetpack-top-posts-widget-css" href="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/style(2).css" type="text/css" media="all">
<link rel="stylesheet" id="genericons-css" href="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/genericons.css" type="text/css" media="all">
<link rel="stylesheet" id="jetpack_css-css" href="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/jetpack.css" type="text/css" media="all">
<script type="text/javascript" src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/jquery.js"></script>
<script type="text/javascript" src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/jquery-migrate.min.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"_2.7.2_beta","is_admin":"0","ajaxurl":"http:\/\/stm32f4-discovery.net\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Press %s to Copy, %s to Paste","minimize":"Click To Expand Code"};
/* ]]> */
</script>
<script type="text/javascript" src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/crayon.min.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var cptch_vars = {"nonce":"65990e5af8","ajaxurl":"http:\/\/stm32f4-discovery.net\/wp-admin\/admin-ajax.php","enlarge":"0"};
/* ]]> */
</script>
<script type="text/javascript" src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/front_end_script.js"></script>
<script type="text/javascript" src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/cookielawinfo.js"></script>
<script type="text/javascript" src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/bootstrap.min.js"></script>
<script type="text/javascript" src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/front.js"></script>
<script type="text/javascript" src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/chosen.jquery.min.js"></script>
<script type="text/javascript" src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/jquery.swipebox.min.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var rlArgs = {"script":"swipebox","selector":"lightbox","customEvents":"","activeGalleries":"1","animation":"1","hideCloseButtonOnMobile":"0","removeBarsOnMobile":"0","hideBars":"1","hideBarsDelay":"5000","videoMaxWidth":"1080","useSVG":"1","loopAtEnd":"0"};
/* ]]> */
</script>
<script type="text/javascript" src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/front(1).js"></script>
<script type="text/javascript" src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/jquery.fancybox.min.js"></script>
<script type="text/javascript" src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/jquery.flexslider.min.js"></script>
<meta name="generator" content="WordPress Download Manager 2.8.95">
<link rel="https://api.w.org/" href="http://stm32f4-discovery.net/wp-json/">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://stm32f4-discovery.net/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://stm32f4-discovery.net/wp-includes/wlwmanifest.xml"> 
<link rel="shortlink" href="http://bit.ly/1oCUIFO">
<link rel="alternate" type="application/json+oembed" href="http://stm32f4-discovery.net/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fstm32f4-discovery.net%2F2014%2F05%2Fstm32f4-stm32f429-discovery-pwm-tutorial%2F">
<link rel="alternate" type="text/xml+oembed" href="http://stm32f4-discovery.net/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fstm32f4-discovery.net%2F2014%2F05%2Fstm32f4-stm32f429-discovery-pwm-tutorial%2F&amp;format=xml">

        <script>
            var wpdm_site_url = 'http://stm32f4-discovery.net/';
            var wpdm_home_url = 'http://stm32f4-discovery.net/';
            var ajax_url = 'http://stm32f4-discovery.net/wp-admin/admin-ajax.php';
        </script>


        <script type="text/javascript">
(function(url){
	if(/(?:Chrome\/26\.0\.1410\.63 Safari\/537\.31|WordfenceTestMonBot)/.test(navigator.userAgent)){ return; }
	var addEvent = function(evt, handler) {
		if (window.addEventListener) {
			document.addEventListener(evt, handler, false);
		} else if (window.attachEvent) {
			document.attachEvent('on' + evt, handler);
		}
	};
	var removeEvent = function(evt, handler) {
		if (window.removeEventListener) {
			document.removeEventListener(evt, handler, false);
		} else if (window.detachEvent) {
			document.detachEvent('on' + evt, handler);
		}
	};
	var evts = 'contextmenu dblclick drag dragend dragenter dragleave dragover dragstart drop keydown keypress keyup mousedown mousemove mouseout mouseover mouseup mousewheel scroll'.split(' ');
	var logHuman = function() {
		var wfscr = document.createElement('script');
		wfscr.type = 'text/javascript';
		wfscr.async = true;
		wfscr.src = url + '&r=' + Math.random();
		(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(wfscr);
		for (var i = 0; i < evts.length; i++) {
			removeEvent(evts[i], logHuman);
		}
	};
	for (var i = 0; i < evts.length; i++) {
		addEvent(evts[i], logHuman);
	}
})('//stm32f4-discovery.net/?wordfence_logHuman=1&hid=683573B97C1AED673AD6CBEF647D1A56');
</script>
<link rel="dns-prefetch" href="http://v0.wordpress.com/">
<link rel="shortcut icon" href="http://stm32f4-discovery.com/wp-content/uploads/favicon.ico">
<!--[if lt IE 9]>
<script src="http://stm32f4-discovery.net/wp-content/themes/hueman/js/ie/html5.js"></script>
<script src="http://stm32f4-discovery.net/wp-content/themes/hueman/js/ie/selectivizr.js"></script>
<![endif]-->
		<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
		<style type="text/css">
/* Dynamic CSS: For no styles in head, copy and put the css below in your child theme's style.css, disable dynamic styles */
.boxed #wrapper, .container-inner { max-width: 1500px; }
img { -webkit-border-radius: 6px; border-radius: 6px; }
</style>

<style id="custom-css-css">.w3eden{background:#fff;background:#fff;background:-moz-linear-gradient(top,#ffffff 0%,#D0DCE8 100%);background:-webkit-gradient(linear,left top,left bottom,color-stop(0%,#ffffff),color-stop(100%,#D0DCE8));background:-webkit-linear-gradient(top,#ffffff 0%,#D0DCE8 100%);background:-o-linear-gradient(top,#ffffff 0%,#D0DCE8 100%);background:-ms-linear-gradient(top,#ffffff 0%,#D0DCE8 100%);background:linear-gradient(to bottom,#ffffff 0%,#D0DCE8 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff',endColorstr='#D0DCE8',GradientType=0)}table th{vertical-align:center !important;background:#E1E1E1}small{font-size:60% !important}#header-ads{display:block !important}</style>
<meta data-pso-pv="1.2.1" data-pso-pt="singlePost" data-pso-th="60cc5c9124fd11d1f2c4b37a594ba410"><script async="" src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script pagespeed_no_defer="" data-pso-version="20160525_220723">window.dynamicgoogletags={config:[]};dynamicgoogletags.config=["ca-pub-1510671897088135",[[[["DIV",,"categories-3",[]],["10px","10px",0],3,[0],"6044623402",0,,,10],[["NAV",0,,[]],["10px","10px",1],3,[2],"7521356607",0,,,5],[["ARTICLE",0,,["tag-serial-peripheral-interface"],2],["10px","14px",0],0,[0],"8998089802",0,,,14]]],[[[[,[[0,19]],,16,1,1],[,[[180,199]],,17,1,1],[,[[320,339]],,32,1,1]],[[["BODY",0,,[]],["10px","10px",1],1,[4],,0,,,2],[["HEADER",0,,[]],["10px","10px",1],2,[2],,0,,,4],[["HEADER",0,,[]],["10px","10px",1],3,[2],,0,,,4],[["NAV",0,,[]],["10px","10px",1],0,[4],,0,,,5],[["NAV",0,,[]],["10px","10px",1],3,[0],,0,,,5],[["DIV",,"page",[]],["10px","10px",0],3,[3],,0,,,4],[["DIV",,,["main"]],["10px","10px",0],3,[3],,0,,,6],[["LI",,,["category"]],["10px","10px",1],1,[2],,0,,,11],[["LI",,,["category"]],["10px","10px",1],2,[2],,0,,,11],[["DIV",,,["author-bio"]],["10px","40px",0],0,[1],,0,,,10],[["DIV",,,["author-bio"]],["10px","40px",0],3,[1],,0,,,10],[["DIV",,"disqus_thread",[]],["10px","10px",0],0,[1],,0,,,10],[["DIV",,"disqus_thread",[]],["10px","10px",0],3,[1],,0,,,10],[["LI",,,["previous"]],["10px","10px",0],1,[1],,0,,,11],[["DIV",,"top-posts-3",[]],["10px","10px",0],0,[1],,0,,,10],[["DIV",,"top-posts-3",[]],["10px","10px",0],3,[1],,0,,,10],[["DIV",,"recent-comments-3",[]],["10px","10px",0],3,[1],,0,,,10],[["DIV",,"categories-3",[]],["10px","10px",0],3,[1],,0,,,10],[["DIV",,"recent-posts-2",[]],["10px","10px",0],3,[1],,0,,,10],[["TABLE",,"wp-calendar",[]],["10px","10px",0],3,[1],,0,,,12],[["DIV",,"archives-3",[]],["10px","10px",0],3,[1],,0,,,10],[["DIV",,"email-subscribers-2",[]],["10px","10px",0],0,[1],,0,,,10],[["DIV",,"email-subscribers-2",[]],["10px","10px",0],3,[1],,0,,,10],[["DIV",,"polls-widget-2",[]],["10px","10px",0],3,[1],,0,,,10],[["DIV",,"paypal_support_widget",[]],["10px","10px",0],3,[1],,0,,,12],[["DIV",,"search-2",[]],["10px","10px",0],3,[1],,0,,,10],[["DIV",,"text-4",[]],["10px","10px",0],3,[1],,0,,,10],[["DIV",,"text-5",[]],["10px","10px",0],3,[3],,0,,,10],[["DIV",,"copyright",[]],["10px","10px",0],0,[3],,0,,,9],[["DIV",,"copyright",[]],["10px","10px",0],3,[5],,0,,,9],[["ARTICLE",0,,["tag-serial-peripheral-interface"],0],["10px","10px",0],0,[0],,0,,,14],[["ARTICLE",0,,["tag-serial-peripheral-interface"],1],["10px","15px",0],0,[0],,0,,,14],[["ARTICLE",0,,["tag-serial-peripheral-interface"],2],["10px","14px",0],0,[0],,0,,,14],[["ARTICLE",0,,["tag-serial-peripheral-interface"],-1],["10px","15px",0],3,[0],,0,,,14],[["SECTION",,"footer-ads",[]],["10px","10px",0],0,[3],,0,,,5],[["BODY",0,,[]],["10px","10px",1],2,[5],,0,,,2],[["DIV",,"wrapper",[]],["10px","10px",0],3,[5],,0,,,3],[["SECTION",,"footer-bottom",[]],["10px","10px",0],3,[5],,0,,,5]],["4031336600","5508069809","6984803003","8461536204","9938269402"],["ARTICLE",,,["tag-serial-peripheral-interface"]],"20160526_040817",5]],"WordPressSinglePost","4852675400",,0.01,,[,1465764017894],0.01,0,,,"http://stm32f4-discovery.com"];(function(){var h,r=this,aa=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b},t=function(a){return"number"==typeof a},ba=function(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}},u=function(a,b){function c(){}c.prototype=b.prototype;a.Da=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Fa=function(a,c,f){for(var g=Array(arguments.length-2),k=2;k<arguments.length;k++)g[k-2]=arguments[k];return b.prototype[c].apply(a,
g)}};var ca=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},da=function(a,b){return a<b?-1:a>b?1:0};var ea=Array.prototype.filter?function(a,b,c){return Array.prototype.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,g="string"==typeof a?a.split(""):a,k=0;k<d;k++)if(k in g){var l=g[k];b.call(c,l,k,a)&&(e[f++]=l)}return e},fa=Array.prototype.map?function(a,b,c){return Array.prototype.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f="string"==typeof a?a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e};var v;a:{var ga=r.navigator;if(ga){var ha=ga.userAgent;if(ha){v=ha;break a}}v=""}var w=function(a){return-1!=v.indexOf(a)};var ia=function(a,b){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.call(void 0,a[c],c,a)},ja=function(a,b){var c=a.length;if(0==c)return 0;for(var d=b||305419896,e=0;e<c;e++)d^=(d<<5)+(d>>2)+a.charCodeAt(e)&4294967295;return 0<d?d:4294967296+d};var ka=function(a,b,c,d,e){this.ea=c||2048;this.Z=a||"&";this.ma=b||",$";this.R=void 0!==d?d:"trn";this.Ea=e||null;this.T={};this.wa=0;this.L=[]},na=function(a,b,c,d){b=b+"//"+c+d;var e=la(a)-d.length-0;if(0>e)return"";a.L.sort(function(a,b){return a-b});d=null;c="";for(var f=0;f<a.L.length;f++)for(var g=a.L[f],k=a.T[g],l=0;l<k.length;l++){var m=ma(k[l],a.Z,a.ma);if(m){m=c+m;if(e>=m.length){e-=m.length;b+=m;c=a.Z;break}null==d&&(d=g)}}e="";a.R&&null!=d&&(e=c+a.R+"="+(a.Ea||d));return b+e+""},la=function(a){if(!a.R)return a.ea;
var b=1,c;for(c in a.T)b=c.length>b?c.length:b;return a.ea-a.R.length-b-a.Z.length-1},ma=function(a,b,c,d,e){var f=[];ia(a,function(a,k){var l=oa(a,b,c,d,e);l&&f.push(k+"="+l)});return f.join(b)},oa=function(a,b,c,d,e){if(null==a)return"";b=b||"&";c=c||",$";"string"==typeof c&&(c=c.split(""));if(a instanceof Array){if(d=d||0,d<c.length){for(var f=[],g=0;g<a.length;g++)f.push(oa(a[g],b,c,d+1,e));return f.join(c[d])}}else if("object"==typeof a)return e=e||0,2>e?encodeURIComponent(ma(a,b,c,d,e+1)):"...";
return encodeURIComponent(String(a))};var ra=function(a,b,c,d){var e=pa;try{var f;b instanceof ka?f=b:(f=new ka,ia(b,function(a,b){var c=f,d=c.wa++,e={};e[b]=a;e=[e];c.L.push(d);c.T[d]=e}));if((c?e.Ba:Math.random())<(d||e.na)){var g=na(f,e.ya,e.pa,e.xa+a+"&");qa(g)}}catch(k){}},qa=function(a){r.google_image_requests||(r.google_image_requests=[]);var b=r.document.createElement("img");b.src=a;r.google_image_requests.push(b)};var sa=w("Opera"),x=w("Trident")||w("MSIE"),ta=w("Edge"),ua=w("Gecko")&&!(-1!=v.toLowerCase().indexOf("webkit")&&!w("Edge"))&&!(w("Trident")||w("MSIE"))&&!w("Edge"),va=-1!=v.toLowerCase().indexOf("webkit")&&!w("Edge"),wa=function(){var a=r.document;return a?a.documentMode:void 0},xa;
a:{var ya="",za=function(){var a=v;if(ua)return/rv\:([^\);]+)(\)|;)/.exec(a);if(ta)return/Edge\/([\d\.]+)/.exec(a);if(x)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(va)return/WebKit\/(\S+)/.exec(a);if(sa)return/(?:Version)[ \/]?(\S+)/.exec(a)}();za&&(ya=za?za[1]:"");if(x){var Aa=wa();if(null!=Aa&&Aa>parseFloat(ya)){xa=String(Aa);break a}}xa=ya}
var Ba=xa,Ca={},Da=function(a){if(!Ca[a]){for(var b=0,c=ca(String(Ba)).split("."),d=ca(String(a)).split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",k=d[f]||"",l=RegExp("(\\d*)(\\D*)","g"),m=RegExp("(\\d*)(\\D*)","g");do{var p=l.exec(g)||["","",""],n=m.exec(k)||["","",""];if(0==p[0].length&&0==n[0].length)break;b=da(0==p[1].length?0:parseInt(p[1],10),0==n[1].length?0:parseInt(n[1],10))||da(0==p[2].length,0==n[2].length)||da(p[2],n[2])}while(0==b)}Ca[a]=0<=b}},Ea=r.document,
Fa=Ea&&x?wa()||("CSS1Compat"==Ea.compatMode?parseInt(Ba,10):5):void 0;var Ga;if(!(Ga=!ua&&!x)){var Ha;if(Ha=x)Ha=9<=Number(Fa);Ga=Ha}Ga||ua&&Da("1.9.1");x&&Da("9");var Ia=function(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d};Ia.prototype.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};var Ja=window;var pa;pa=new function(){this.ya="http:"===Ja.location.protocol?"http:":"https:";this.pa="pagead2.googlesyndication.com";this.xa="/pagead/gen_204?id=";this.na=.01;this.Ba=Math.random()};var y=function(){},Ka="function"==typeof Uint8Array,A=function(a,b,c){a.b=null;b||(b=[]);a.Ha=void 0;a.M=-1;a.g=b;a:{if(a.g.length){b=a.g.length-1;var d=a.g[b];if(d&&"object"==typeof d&&"array"!=aa(d)){a.P=b-a.M;a.H=d;break a}}a.P=Number.MAX_VALUE}a.Ga={};if(c)for(b=0;b<c.length;b++)d=c[b],d<a.P?(d+=a.M,a.g[d]=a.g[d]||z):a.H[d]=a.H[d]||z},z=[],B=function(a,b){if(b<a.P){var c=b+a.M,d=a.g[c];return d===z?a.g[c]=[]:d}d=a.H[b];return d===z?a.H[b]=[]:d},Ma=function(a){a=B(La,a);return null==a?a:+a},C=
function(a,b,c){b<a.P?a.g[b+a.M]=c:a.H[b]=c},D=function(a,b,c){a.b||(a.b={});if(!a.b[c]){var d=B(a,c);d&&(a.b[c]=new b(d))}return a.b[c]},E=function(a,b,c){a.b||(a.b={});if(!a.b[c]){for(var d=B(a,c),e=[],f=0;f<d.length;f++)e[f]=new b(d[f]);a.b[c]=e}b=a.b[c];b==z&&(b=a.b[c]=[]);return b},Na=function(a,b,c){a.b||(a.b={});c=c||[];for(var d=[],e=0;e<c.length;e++)d[e]=c[e].g;a.b[b]=c;C(a,b,d)};y.prototype.toString=function(){return this.g.toString()};
var F=function(a){return new a.constructor(Oa(a.g))},Oa=function(a){var b;if("array"==aa(a)){for(var c=Array(a.length),d=0;d<a.length;d++)null!=(b=a[d])&&(c[d]="object"==typeof b?Oa(b):b);return c}if(Ka&&a instanceof Uint8Array)return new Uint8Array(a);c={};for(d in a)null!=(b=a[d])&&(c[d]="object"==typeof b?Oa(b):b);return c};var G=function(a){this.fa={};this.fa.c=a;this.o=[];this.u=null;this.A=[];this.ca=0};G.prototype.i=function(a){for(var b=0;b<this.o.length;b++)if(this.o[b]==a)return this;this.o.push(a);return this};var Pa=function(a,b){a.u=a.u?a.u:b;return a};G.prototype.D=function(a){for(var b=0;b<this.A.length;b++)if(this.A[b]==a)return this;this.A.push(a);return this};
G.prototype.getData=function(a){var b=this.fa,c={},d;for(d in b)c[d]=b[d];0<this.ca&&(c.t=this.ca);c.err=this.o.join();c.warn=this.A.join();if(this.u){c.excp_n=this.u.name;c.excp_m=this.u.message&&this.u.message.substring(0,512);if(b=this.u.stack){d=this.u.stack;try{-1==d.indexOf("")&&(d="\n"+d);for(var e;d!=e;)e=d,d=d.replace(/((https?:\/..*\/)[^\/:]*:\d+(?:.|\n)*)\2/,"$1");b=d.replace(/\n */g,"\n")}catch(f){b=""}}c.excp_s=b}c.w=0<a.innerWidth?a.innerWidth:null;c.h=0<a.innerHeight?a.innerHeight:
null;return c};var Ra=function(a,b){Qa(a,a.sa,a.W,b)},Qa=function(a,b,c,d){var e=d.u;d=d.getData(a.K);a.ua?(d.type=b,a.K.console.log(d),e&&a.K.console.error(e)):0<c&&ra(b,d,"jserror"!=b,c)};var H=function(a){return a.dynamicgoogletags=a.dynamicgoogletags||{}};var I=function(a){A(this,a,Sa)};u(I,y);var Sa=[4];I.prototype.v=function(){return F(this)};I.prototype.getId=function(){return B(this,3)};var J=function(a){A(this,a,null)};u(J,y);J.prototype.v=function(){return F(this)};var Ta=function(a){A(this,a,null)};u(Ta,y);Ta.prototype.v=function(){return F(this)};var K=function(a){return D(a,I,1)},L=function(a){A(this,a,Ua)};u(L,y);var Ua=[1];L.prototype.v=function(){return F(this)};L.prototype.j=function(){return E(this,Ta,1)};L.prototype.ha=function(a){Na(this,1,a)};var M=function(a){A(this,a,Va)};u(M,y);var Va=[2];M.prototype.v=function(){return F(this)};M.prototype.da=function(){return B(this,3)};M.prototype.ia=function(a){C(this,3,a)};var Wa=function(a){A(this,a,null)};
u(Wa,y);Wa.prototype.v=function(){return F(this)};var N=function(a){A(this,a,Xa)};u(N,y);var Xa=[1,2,3];N.prototype.v=function(){return F(this)};N.prototype.j=function(){return E(this,Ta,2)};N.prototype.ha=function(a){Na(this,2,a)};var Za=function(a){A(this,a,Ya)};u(Za,y);var Ya=[3];h=Za.prototype;h.v=function(){return F(this)};h.B=function(){return B(this,1)};h.F=function(){return D(this,L,2)};h.O=function(){return B(this,4)};h.da=function(){return B(this,5)};h.ia=function(a){C(this,5,a)};
h.N=function(){return D(this,O,9)};var O=function(a){A(this,a,null)};u(O,y);O.prototype.v=function(){return F(this)};var $a=function(a){this.m=a;this.ja=[]};$a.prototype.f=function(){return 0<E(this.m,N,3).length?E(this.m,N,3)[0]:null};var bb=function(a){return"INS"==a.tagName&&ab(a,["adsbygoogle-placeholder"])},ab=function(a,b){for(var c=a.className?a.className.split(/\s+/):[],d={},e=0;e<c.length;++e)d[c[e]]=!0;for(e=0;e<b.length;++e)if(!d[b[e]])return!1;return!0};var cb=function(a){return a.adsbygoogle=a.adsbygoogle||[]};var db=function(a,b){if(!a)return!1;var c;c=b.getComputedStyle?b.getComputedStyle(a,null):a.currentStyle;if(!c)return!1;c=c.cssFloat||c.styleFloat;return"left"==c||"right"==c},eb=function(a){for(a=a.previousSibling;a&&1!=a.nodeType;)a=a.previousSibling;return a?a:null},fb=function(a){return!!a.nextSibling||!!a.parentNode&&fb(a.parentNode)};var ib=function(a,b){var c=b||document,d=null,e=a.getId();if(e)if(d=c.getElementById(e))d=[d];else return[];if(e=B(a,1))if(d){for(var f=[],g=0;g<d.length;++g)d[g].tagName&&d[g].tagName.toUpperCase()==e.toUpperCase()&&f.push(d[g]);d=f}else{d=c.getElementsByTagName(e);e=[];for(f=0;f<d.length;++f)e.push(d[f]);d=e}if((e=B(a,4))&&0<e.length)if(d)for(c=d,d=[],f=0;f<c.length;++f)ab(c[f],e)&&d.push(c[f]);else{if(!c.body)return[];d=gb(e,c.body)}c=B(a,2);if(t(c)&&d)if(0>c&&(c+=d.length),d.length>c)d=[d[c]];
else return[];c=B(a,5);if(t(c)&&d){e=[];for(f=0;f<d.length;f++)g=hb(d[f]),0>c&&(c+=g.length),0<=c&&c<g.length&&e.push(g[c]);d=e}c=B(a,6);if(void 0!==c&&d)switch(c){case 0:return d.slice(1);case 1:return d.slice(0,d.length-1);case 2:return d.slice(1,d.length-1)}return d?d:[]},hb=function(a){var b=[];a=a.getElementsByTagName("p");for(var c=0;c<a.length;++c)100<=jb(a[c])&&b.push(a[c]);return b},kb=function(a,b){if(a==b)return!0;if(!a||!b||B(a,1)!=B(b,1)||B(a,2)!=B(b,2)||a.getId()!=b.getId()||B(a,7)!=
B(b,7)||B(a,5)!=B(b,5)||B(a,6)!=B(b,6))return!1;var c=B(a,4),d=B(b,4);if(c||d)if(c&&d&&c.length==d.length)for(var e=0;e<c.length;e++){if(c[e]!=d[e])return!1}else return!1;return!0},jb=function(a){if(3==a.nodeType)return a.length;if(1!=a.nodeType||"SCRIPT"==a.tagName)return 0;for(var b=0,c=0;c<a.childNodes.length;++c)b+=jb(a.childNodes[c]);return b},gb=function(a,b){if(b.getElementsByClassName){for(var c=b.getElementsByClassName(a.join(" ")),d=[],e=0;e<c.length;++e)d.push(c[e]);return d}c=[];ab(b,
a)&&c.push(b);for(e=0;e<b.childNodes.length;++e)1==b.childNodes[e].nodeType&&(c=c.concat(gb(a,b.childNodes[e])));return c};var lb=function(a){a=a.document;return("CSS1Compat"==a.compatMode?a.documentElement:a.body)||{}},mb=function(a){return void 0===a.pageYOffset?(a.document.documentElement||a.document.body.parentNode||a.document.body).scrollTop:a.pageYOffset};var nb=function(a,b){var c=K(b);if(!c)return null;c=ib(c,a);return 0<c.length?c[0]:null},pb=function(a,b){var c=ob(a,b,!0);return t(c)&&!(c<=lb(a).clientHeight)},qb=function(a,b){return a.body?b-a.body.getBoundingClientRect().top:b},ob=function(a,b,c){if(!c||!t(B(b,8))){var d=nb(a.document,b);if(d){var e=null!=D(b,J,2)?B(D(b,J,2),3):void 0;c=window.document.createElement("div");c.className="googlepublisherpluginad";var f=c.style;f.textAlign="center";f.width="100%";f.height="0px";f.clear=e?"both":
"none";rb(c,d,B(b,3));d=c.getBoundingClientRect().top+mb(a);c.parentNode.removeChild(c);C(b,8,d)}}b=B(b,8);return t(b)?b-mb(a):null},sb={0:0,1:1,2:2,3:3},tb={0:"auto",1:"horizontal",2:"vertical",3:"rectangle"},ub=function(a,b){a.sort(function(a,d){var e=ob(b,a,!0),e=t(e)?e:Number.POSITIVE_INFINITY,f=ob(b,d,!0),f=t(f)?f:Number.POSITIVE_INFINITY;return e-f})},rb=function(a,b,c){switch(sb[c]){case 0:b.parentNode&&b.parentNode.insertBefore(a,b);break;case 3:if(c=b.parentNode){var d=b.nextSibling;if(d&&
d.parentNode!=c)for(;d&&8==d.nodeType;)d=d.nextSibling;c.insertBefore(a,d)}break;case 1:b.insertBefore(a,b.firstChild);break;case 2:b.appendChild(a)}bb(b)&&(b.style.display="block")};var Q=function(a){this.a=a;this.l=[];this.ba=0;this.o=[];this.A=[];this.X=null;this.ga=!1},vb=function(a,b){var c=D(a.f(),I,4);if(!(c&&b&&B(b,1)==B(c,1)&&b.getId()==c.getId()&&t(B(b,2))&&t(B(b,5))))return!1;var c=B(c,4),d=B(b,4);if(c.length!=d.length)return!1;for(var e=0;e<c.length;++e)if(d[e]!=c[e])return!1;return!0},wb=function(a){var b=t(void 0)?void 0:20,c=a.f(),d=c.j(),e=D(c,I,4);if(!(a.ga||0>=b)&&e&&0!=ib(e,a.a.document).length){a.ga=!0;for(var c=[],f=0;f<d.length;++f){var g=d[f],k=K(g);if(vb(a,
k)){var l=B(k,2),k=B(k,5);null!=l&&null!=k&&0<=l&&0<=k&&(!c[l]||B(K(c[l]),5)<k)&&(c[l]=g)}}k=0;d=ib(e,a.a.document);for(l=0;l<c.length&&k<b;++l){var e=k,f=a,m=d[l],g=c[l],k=b-k,p=f.f().j(),n=0;if(m&&g){m=hb(m).length;switch(B(K(g),6)){case 0:case 1:--m;break;case 2:m-=2}for(var q=B(K(g),5)+1;q<m&&n<k;++q){var P=g.v(),xb=K(P);C(xb,5,q);p.push(P);n++}}n&&f.f().ha(p);k=e+n}}};Q.prototype.i=function(a){for(var b=0;b<this.o.length;++b)if(this.o[b]==a)return;this.o.push(a)};
Q.prototype.D=function(a){for(var b=0;b<this.A.length;++b)if(this.A[b]==a)return;this.A.push(a)};
var yb=function(a,b,c){var d=sb[B(b,3)],e=nb(a.a.document,b);if(e){var f=K(b)?B(K(b),2):void 0,g;a:{g=a.a;if(null!=f)switch(d){case 0:g=db(eb(e),g);break a;case 3:g=db(e,g);break a;case 2:f=e.lastChild;g=db(f?1==f.nodeType?f:eb(f):null,g);break a}g=!1}if(!(g||!c&&2==d&&!fb(e)||(c=1==d||2==d?e:e.parentNode,c&&!bb(c)&&0>=c.offsetWidth)))a:if(B(b,7))a.D(8);else{b:if(B(b,5))c=B(b,5);else{if(c=R(a).f())if(c=B(c,3),a.ba<c.length){c=c[a.ba++];break b}a.i(4);c=null}if(null!=c){C(b,7,!0);d=[];(g=a.O())&&d.push(g);
g=R(a).ja;for(f=0;f<g.length;++f)d.push(g[f]);t(B(b,9))&&d.push("pso-lv-"+B(b,9));var k=a.a.document;g=a.B();var f=B(b,6),f=null!=f?tb[f]:f,l=D(b,J,2),m,p,n;l&&(m=B(l,1),p=B(l,2),n=!!B(l,3));var l=c,q=k.createElement("div"),P=q.style;P.textAlign="center";P.width="100%";P.height="auto";P.clear=n?"both":"none";n=k.createElement("ins");k=n.style;k.display="block";k.margin="auto";k.backgroundColor="transparent";m&&(k.marginTop=m);p&&(k.marginBottom=p);q.appendChild(n);q.className="googlepublisherpluginad";
n.className="adsbygoogle";n.setAttribute("data-ad-client",g);n.setAttribute("data-ad-format",f?f:"auto");n.setAttribute("data-tag-origin","pso");l&&n.setAttribute("data-ad-slot",l);d.length&&n.setAttribute("data-ad-channel",d.join("+"));rb(q,e,B(b,3));try{cb(a.a).push({})}catch(xb){B(b,5)!=c&&a.ba--;C(b,7,!1);a.D(6);q.parentNode&&q.parentNode.removeChild(q);break a}a.l.push(q)}}}},zb=function(a,b){for(var c=Number.POSITIVE_INFINITY,d=0;d<a.l.length;++d)var e=a.l[d].getBoundingClientRect().top,f=a.l[d].getBoundingClientRect().bottom,
c=Math.min(c,b<e?e-b:f<b?b-f:0);return c},R=function(a){a=H(a.a).ps||null;if(!a)throw Error("No placementState");return a},Ab=function(a,b){var c=R(a).m;if(!c||!c.B())return a.i(5),!1;c=E(c,N,3)[0];return c?B(c,3).length<b?(a.i(4),a.i(5),!1):!0:(a.i(5),!1)};Q.prototype.B=function(){return R(this).m.B()||""};Q.prototype.O=function(){return R(this).m.O()||void 0};Q.prototype.F=function(){return R(this).m.F()||new L};Q.prototype.f=function(){var a=R(this).f();if(!a)throw Error("No mConfig");return a};
var Bb=function(a){a=B(a.f(),6);return null!=a&&0<a};var Cb=function(){this.I=this.J=this.$=null};var S=function(a){Q.call(this,a)};u(S,Q);S.prototype.apply=function(a){var b;(b=R(this).m)&&b.B()&&b.F()?b=!0:(this.i(5),b=!1);if(b){b=this.F().j();for(var c=0;c<b.length;c++){var d=b[c];B(d,7)||yb(this,d,a)}}};S.prototype.C=function(){return(0==this.F().j().length||0<this.l.length)&&0==this.o.length};var Db=function(a){Q.call(this,a);if(Ab(this,0)){a=this.F().j();for(var b=this.f().j(),c=0;c<a.length;c++){var d=a[c],e;a:{e=d;var f=b;if(e&&K(e))for(var g=0;g<f.length;g++){var k=f[g];if(B(e,3)==B(k,3)&&kb(K(e),K(k))){e=k;break a}}e=null}e&&D(e,J,2)&&(e=D(e,J,2),d.b||(d.b={}),f=e?e.g:e,d.b[2]=e,C(d,2,f))}}};u(Db,S);var Eb=function(a,b){var c=void 0===b.pageXOffset?(b.document.documentElement||b.document.body.parentNode||b.document.body).scrollLeft:b.pageXOffset,d=mb(b);if(a.getBoundingClientRect){var e=a.getBoundingClientRect();return new Ia(e.top+d,e.right+c,e.bottom+d,e.left+c)}e=b.document.createRange();e.selectNodeContents(a);if(e.collapsed)return new Ia(0,0,0,0);e=e.getBoundingClientRect();return new Ia(e.top+d,e.right+c,e.bottom+d,e.left+c)};var Fb={"120x90":!0,"160x90":!0,"180x90":!0,"200x90":!0,"468x15":!0,"728x15":!0};var Gb=function(a,b){var c=a.id;return!!c&&!!c.indexOf&&"function"===typeof c.indexOf&&0===c.indexOf(b)};var Hb=function(a){var b=a.googletag;if(!b||"function"!=typeof b.pubads)return T("div[id^=div-gpt-ad]",a);var c=[];try{for(var d=b.pubads().getSlots(),b=0;b<d.length;b++){var e=d[b].getSlotElementId(),f=a.document.getElementById(e);null!=f&&c.push(f)}}catch(g){ra("ladd_evt",{ok:0,err:g.toString()},!0,.1)}return c},Ib=function(a){var b=T("iframe[id^=aswift_],iframe[id^=google_ads_frame]",a);return ea(b,function(b){if("IFRAME"!=b.tagName&&"INS"!=b.tagName||!Gb(b,"google_ads_frame")&&!Gb(b,"aswift_"))b=
!1;else{b=Eb(b,a);var d=b.bottom-b.top;b=!(Fb[b.right-b.left+"x"+d]&&50>d)}return b})},Jb=function(a){return T("iframe[id^=aswift_],iframe[id^=google_ads_frame]",a)},T=function(a,b){return fa(b.document.querySelectorAll(a),function(a){return a})},Mb=function(a){this.K=a;this.ta=Hb(a);this.la=T("ins.adsbygoogle",a);this.ka=Jb(a);this.za=Ib(a);this.Aa=T("[__lsu_res=reserved]",a);this.S=[];a=Kb(this);for(var b=0;b<a.length;b++)this.S.push(new Lb(a[b]))},Kb=function(a){return[].concat(a.ta,a.la,a.ka,
a.Aa)},Lb=function(a){this.qa=a;this.U=null};var U=function(a){Q.call(this,a)};u(U,Q);U.prototype.apply=function(){};U.prototype.C=function(){var a;if(Bb(this)){var b=this.a;a=Hb(b);var c=T("ins.adsbygoogle",b),d=Jb(b),b=T("[__lsu_res=reserved]",b);a=0<[].concat(a,c,d,b).length}else a=!0;return a};var Nb=function(a){Q.call(this,a);this.G=null};u(Nb,Q);
Nb.prototype.apply=function(a){if(a&&Ab(this,2)){wb(this);a=lb(this.a).clientHeight||640;null==this.G&&(this.G=new Mb(this.a));var b=this.G.za.length;if(!(5<=b)){var b=Math.min(2,5-b),c=this.f().j();ub(c,this.a);for(var d=0;d<c.length&&this.l.length<b;++d){var e=c[d];if(pb(this.a,e)){var f=ob(this.a,e,!0);if(void 0!==f){var g;a:{g=this.G;for(var k=a,l=f,m=0;m<g.S.length;m++){var p=l,n=k,q;q=g.S[m];q.U||(q.U=Eb(q.qa,g.K));q=q.U;if(q.top-n<p&&p<q.bottom+n){g=!0;break a}}g=!1}g||zb(this,f)<a||yb(this,
e,!0)}}}0==this.l.length&&this.D(1)}}};Nb.prototype.C=function(){return Bb(this)?0<Kb(this.G).length:!0};var Ob=function(a){Q.call(this,a);this.Y=!1};u(Ob,U);
Ob.prototype.apply=function(a){if(a&&!this.Y){var b;a:{var c=this.a.document;b=c.body;if(a&&b){a=this.B();var d=c.createElement("div");d.className="googlepublisherpluginad";d.style.display="block";c=c.createElement("ins");c.className="adsbygoogle";c.setAttribute("data-ad-client",a);c.setAttribute("data-reactive-ad-format","1");c.setAttribute("data-tag-origin","pso");c.style.display="none";d.appendChild(c);rb(d,b,2);try{cb(this.a).push({})}catch(e){this.D(6);d.parentNode&&d.parentNode.removeChild(d);
b=5;break a}this.l.push(d);b=0}else b=4}this.Y=0==b}};Ob.prototype.C=function(){return this.Y&&U.prototype.C.call(this)};var Pb=function(a){Q.call(this,a);a=lb(a).clientHeight;this.oa=.1*a;this.va=.75*a};u(Pb,Q);
Pb.prototype.apply=function(a){if(Ab(this,3)&&!this.C()){wb(this);var b=this.f().j();ub(b,this.a);var c;c=this.oa;var d;d=document;d=d.querySelectorAll?d.querySelectorAll("header,#header,#masthead,.header,.site-header"):[];for(var e=d.length,f=0<e?d[0]:null,g=1;g<e;g++)d[g].getBoundingClientRect().top<f.getBoundingClientRect().top&&(f=d[g]);(d=f)&&(d=d.getBoundingClientRect())&&d.top!=d.bottom&&d.left!=d.right&&(c=Math.min(c,qb(document,d.bottom)));for(d=0;d<b.length&&3>this.l.length;d++){e=b[d];
var f=c,g=this.a.document,k=ob(this.a,e,!1);!t(k)||qb(g,k)<f?f=!1:(f=zb(this,k),f=this.va<f);f&&(f=pb(this.a,e),g=B(e,6)||0,f&&0==g&&C(e,6,3),!f&&a||yb(this,e,a))}}};Pb.prototype.C=function(){return 3==this.l.length};var V={};V[16]=S;V[17]=S;V[19]=U;V[29]=Nb;V[33]=U;V[30]=Ob;V[28]=Pb;V[34]=Pb;V[32]=Db;V[1]=S;V[8]=U;V[11]=S;var Qb=[19,29,33,30,16,32,17,34],Rb=[16,19,33,30,17,1,6,8,11];var Sb=function(a,b){for(var c=a.google_ad_modifications=a.google_ad_modifications||{},c=c.loeids=c.loeids||[],d=0;d<b.length;d++)c.push(b[d])};var Tb=function(a,b){var c=a.google_ad_modifications=a.google_ad_modifications||{};(c.ad_channels=c.ad_channels||[]).push(b)},Wb=function(a){a+=Ub;var b=ja(a);return((b%512*2+1)*Vb+ja(a,b)%1024)%1024},Xb=function(a,b,c){var d=a.length;c-=0;return 0>c||c>=b*d?null:a[c%d]};var Yb=function(a){return 0>a||99<a?null:10>a?"0"+a:""+a};var Zb=function(a,b,c){this.V=a;this.ra=c?c:new O};Zb.prototype.N=function(){return this.ra||new O};var $b=function(a){if(!t(a))return!1;for(var b=0;b<Qb.length;++b)if(a==Qb[b])return!1;return!0},ec=function(){var a=W,b=ac,c=bc,d=b.f();if(!d)return cc(16);var e=null,f;a:{f=E(d,M,1);for(var g=0;g<f.length;++g){for(var k=!0,l=0;l<Rb.length;++l)B(f[g],4)==Rb[l]&&(k=!1);if(k){f=[];0==d.j().length&&f.push("PsoInvalidVariant");0==B(d,3).length&&f.push("PsoNoAdSlotCodes");break a}}f=[]}if(0==f.length)a:{e=E(d,M,1);f=c.V;if(t(f))for(g=0;g<e.length;g++)if(k=e[g],V[B(k,4)])for(var l=E(k,Wa,2),m=0;m<l.length;m++){var p=
l[m],n=B(p,1),p=B(p,2);if(t(n)&&t(p)&&f>=n&&f<=p){e=k;break a}}e=null}else for(g=0;g<f.length;++g)b.ja.push(f[g]);if(!e){f=E(d,M,1);e={};for(g=0;g<f.length;g++)e[B(f[g],4)]=!0;f=null;e[19]||e[8]?f=19:e[16]||e[1]?f=16:0<d.j().length&&0<B(d,3).length&&e[34]&&(f=34);null!=f?(e=new M,C(e,6,3),C(e,4,f),16!=f&&19!=f&&e.ia("pso-ama-fallback")):e=null}if(!e)return cc(16);(f=e.da())&&Tb(a,f);f=!0;B(c.N(),2)&&(Date.now?Date.now():+new Date)<B(c.N(),2)||(Tb(a,"pso-ama-exd"),f=!1);B(b.m,11)&&(Tb(a,"pso-ama-stl-tmp"),
f=!1);f&&Tb(a,"pso-ama-elig");2==B(e,6)&&(b=B(e,1),null!=b&&Sb(a,[""+b]));if(f&&(2==B(e,6)||1==B(e,6))){d=E(d,M,1);if(null===c.V)c=[];else{b={};c=[];for(f=0;f<d.length;f++)g=dc(d[f]),null==g||b[g]||(b[g]=!0,c.push(g));b=dc(e);if(null!=b){d=[];b=Yb(b);f=!1;if(b)for(g=0;g<c.length;g++)k=Yb(c[g]),b==k&&(f=!0),k&&d.push("950"+b+k);f||(d=[]);c=d}else c=[]}Sb(a,c)}a=new Cb;a.$=B(e,5);a.J=B(e,4);return a},cc=function(a){var b=new Cb;b.J=a;return b},fc=function(a){a=a.google_ad_modifications=a.google_ad_modifications||
{};a.remove_ads_by_default=!0;a.ad_whitelist=[{ad_tag_origin:"pso"}];a.ad_blacklist=[];a.space_collapsing="slot"},dc=function(a){var b;switch(B(a,6)){case 1:b=B(a,4);break;case 2:b=B(a,7)}return null!=b?b:null};var gc=function(a){this.document=a};var X=function(a){G.call(this,a)};u(X,G);X.prototype.getData=function(a){var b=X.Da.getData.call(this,a),c;a:{c=(new gc(a.document)).document.getElementsByTagName("script");for(var d=0;d<c.length;++d)if(c[d].hasAttribute("data-pso-version")){c=c[d].getAttribute("data-pso-version");break a}c=null}b.sv=c;if(d=H(a).ps||null){c=d.m;var d=d.f(),e=b.wpc;b.wpc=null!=e?e:c.B();b.su=B(c,14);b.tn=c.O();b.ev=d&&B(d,5)}if(a=H(a).ss||null)b.s=a.J,b.st=a.$;return b};var hc=null,ic=!1,lc=function(a){var b=jc,c=kc;b.addEventListener?(a&&b.addEventListener("DOMContentLoaded",a,!1),c&&b.addEventListener("load",c,!1)):b.attachEvent&&c&&b.attachEvent("onload",c)},nc=function(a){t(hc)&&a.clearInterval&&(a.clearInterval(hc),hc=null);ic||mc(a,!1);mc(a,!0)},oc=function(a,b){try{nc(b);var c=H(b).ss||null;if(c&&c.I){var d=c.I,e=d.C(),f=d.o,g=d.A,k=d.X,l=d.l.length;e||0!=l||f.push(6);for(var m=new X(l),c=0;c<g.length;c++)m.D(g[c]);if(e&&0==f.length&&null===k)Qa(a,a.Ca,a.aa,
m);else{for(e=0;e<f.length;e++)m.i(f[e]);Ra(a,Pa(m,k))}}else Ra(a,(new X(0)).i(2))}catch(p){Ra(a,Pa((new X(0)).i(1),p))}H(b).loaded=!0},mc=function(a,b){b||(ic=!0);var c=H(a).ss||null;if(c&&c.I){c=c.I;try{c.apply(b)}catch(d){c.i(1),null===c.X&&(c.X=d)}}},pc=function(){mc(window,!1)};var Y=new function(a){this.Ca="pso_success";this.sa="pso_failure";this.W=this.aa=.01;this.ua=!1;this.K=a}(window);
try{var W=window,La,qc=H(W).config;La=qc?new Za(qc):null;if(!La)throw Error("No config");var rc=Ma(10),sc=Ma(7);Y.aa=null!=rc?rc:Y.aa;Y.W=null!=sc?sc:Y.W;var ac=new $a(La),tc=ac;H(W).ps=tc;var Z,bc;if(w("iPad")||w("Android")&&!w("Mobile")||w("Silk")||!(w("iPod")||w("iPhone")||w("Android")||w("IEMobile")))Z=cc(16);else{var uc,vc=/^#([^=]*)=(\d+)$/.exec(W.location.hash);if((uc=vc&&3==vc.length&&"pso_strategy"==vc[1]?+vc[2]:null)&&V[uc]){Z=cc(uc);var wc=W;$b(uc)&&fc(wc)}else{var xc=W,yc=ac.m.N(),zc;
try{var Ac=parseInt(xc.localStorage.getItem("PSO_EXP0"),10);zc=isNaN(Ac)?null:Ac}catch(a){zc=null}if(null==zc){var Bc=zc=Math.floor(1024*Math.random());try{xc.localStorage.setItem("PSO_EXP0",Bc.toString())}catch(a){}}bc=new Zb(zc,0,yc);Z=ec()}if(1==Z.$){var Cc=W;$b(Z.J)&&fc(Cc)}}if(!Z)throw Error("No strategyState created!");var Dc=Z;H(W).ss=Dc;var Ec=W,Fc=Z,Gc=Fc.J;if(t(Gc)){var Hc=V[Gc];Gc&&Hc&&(Fc.I=new Hc(Ec))}if(bc){var Ic=W,Vb=bc.V,Ub=W.location.hostname,Jc=[],Kc=Xb(["17415655","17415656"],
1,Wb("unif1"));null===Kc||Jc.push(Kc);var Lc=Xb(["17415657","17415658"],10,Wb("unif2"));null===Lc||Jc.push(Lc);var Mc=Xb(["17415659","17415660"],100,Wb("unif3"));null===Mc||Jc.push(""+Mc);0<Jc.length&&Sb(Ic,Jc)}var jc=W,kc=ba(oc,Y,jc),Nc=ba(nc,jc);switch(jc.document.readyState){case "complete":kc();break;case "interactive":Nc();lc();break;default:var Oc=jc,Pc=cb(Oc);Pc.loaded||(Pc.onload=pc);hc=Oc.setInterval(pc,10);lc(Nc)}}catch(a){Ra(Y,Pa(new X(0),a))};})();
</script>
<script async="" src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-1510671897088135",
    enable_page_level_ads: true
  });
</script>
<script type="text/javascript" async="" src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/embed.js"></script><style type="text/css">.fancybox-margin{margin-right:17px;}</style><link rel="stylesheet" type="text/css" id="gravatar-card-css" href="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/hovercard.css"><link rel="stylesheet" type="text/css" id="gravatar-card-services-css" href="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/services.css"><script type="text/javascript" charset="utf-8" async="" src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/timeline.f80add415609dfac297fd37eb66584ee.js"></script><script type="text/javascript" async="" src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/saved_resource(1)"></script><script src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/alfie.f51946af45e0b561c60f768335c9eb79.js" async="" charset="UTF-8"></script></head>



<body class="single single-post postid-389 single-format-standard col-3cm full-width topbar-enabled chrome s1-collapse s2-collapse">



<div id="wrapper">



	<header id="header">

	

		
			<nav class="nav-container group" id="nav-topbar">

				<div class="nav-toggle"><i class="fa fa-bars"></i></div>

				<div class="nav-text"><!-- put your mobile menu text here --></div>

				<div class="nav-wrap container"><ul id="menu-main" class="nav container-inner group"><li id="menu-item-21" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-21"><a href="http://stm32f4-discovery.net/">Home</a></li>
<li id="menu-item-151" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-151"><a href="http://stm32f4-discovery.net/stm32f429-discovery/">STM32F4/29 Discovery</a>
<ul class="sub-menu" style="display: none;">
	<li id="menu-item-278" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-278"><a href="http://stm32f4-discovery.net/2014/04/stm32f429-discovery-with-cmsis-library-in-keil/">Use with Keil uVision</a></li>
	<li id="menu-item-279" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-279"><a href="http://stm32f4-discovery.net/2014/04/stm32f429-inside-coocox-coide/">Use with CooCox</a></li>
</ul>
</li>
<li id="menu-item-1522" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1522"><a href="http://stm32f4-discovery.net/stm32f4-links/">STM32F4 links</a></li>
<li id="menu-item-536" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-536"><a href="http://stm32f4-discovery.net/2014/05/all-stm32f429-libraries-at-one-place/">All STD libraries</a></li>
<li id="menu-item-2307" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2307"><a title="Libraries API" href="http://stm32f4-discovery.net/api">STD Libraries API</a></li>
<li id="menu-item-2625" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-2625"><a href="http://stm32f4-discovery.net/2015/07/all-stm32-hal-libraries/">All HAL libraries</a></li>
<li id="menu-item-2749" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2749"><a href="http://stm32f4-discovery.net/hal_api">HAL Libraries API</a></li>
<li id="menu-item-2861" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2861"><a href="http://esp8266at.com/">ESP8266</a></li>
<li id="menu-item-1071" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-1071"><a href="http://stm32f4-discovery.net/2014/09/stm32f4-tutorials-one-place/">All tutorials</a></li>
<li id="menu-item-1451" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-1451"><a href="http://stm32f4-discovery.net/about/">About</a>
<ul class="sub-menu" style="display: none;">
	<li id="menu-item-2339" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2339"><a target="_blank" href="http://stm32f4-discovery.net/cvs/Europass-CV-Majerle-Tilen-EN.pdf">CV English version</a></li>
	<li id="menu-item-2340" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2340"><a target="_blank" href="http://stm32f4-discovery.net/cvs/Europass-CV-Majerle-Tilen-SL.pdf">CV Slovenian version</a></li>
</ul>
</li>
</ul></div>

				

				<div class="container">

					<div class="container-inner">		

						<div class="toggle-search"><i class="fa fa-search"></i></div>

						<div class="search-expand">

							<div class="search-expand-inner">

								<form method="get" class="searchform themeform" action="http://stm32f4-discovery.net/">
	<div>
		<input type="text" class="search" name="s" onblur="if(this.value==&#39;&#39;)this.value=&#39;To search type and hit enter&#39;;" onfocus="if(this.value==&#39;To search type and hit enter&#39;)this.value=&#39;&#39;;" value="To search type and hit enter">
	</div>
</form>
							</div>

						</div>

					</div><!--/.container-inner-->

				</div><!--/.container-->

				

			</nav><div class="googlepublisherpluginad" style="text-align: center; width: 100%; height: auto; clear: both;"><ins class="adsbygoogle" data-ad-client="ca-pub-1510671897088135" data-ad-format="auto" data-tag-origin="pso" data-ad-slot="7521356607" data-ad-channel="WordPressSinglePost+pso-lv-5" style="display: block; margin: 10px auto; background-color: transparent;"></ins></div><!--/#nav-topbar-->

		
		

		<div class="container group">

			<div class="container-inner">

			<!-- OGLASI -->

				<div class="group pad">

					<p class="site-title"><a href="http://stm32f4-discovery.net/" rel="home">STM32F4 Discovery</a></p>

					<p class="site-description">Libraries and tutorials for STM32Fxxx series by Tilen Majerle.</p>
					
					<div id="header-ads">

					</div>

					
				</div>

				

				
					<nav class="nav-container group" id="nav-header">

						<div class="nav-toggle"><i class="fa fa-bars"></i></div>

						<div class="nav-text"><!-- put your mobile menu text here --></div>

						<div class="nav-wrap container"><ul id="menu-top-menu" class="nav container-inner group"><li id="menu-item-424" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-424"><a title="Contact me" href="http://stm32f4-discovery.net/about/">About</a></li>
<li id="menu-item-1317" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1317"><a title="View me on LinkedIn" target="_blank" href="http://si.linkedin.com/pub/tilen-majerle/7/697/85a">LinkedIn</a></li>
<li id="menu-item-422" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-422"><a title="Follow me on Twitter" target="_blank" href="https://twitter.com/tilz0R">Twitter</a></li>
<li id="menu-item-423" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-423"><a title="Follow me on Google+" target="_blank" href="https://plus.google.com/+TilenMajerle?rel=author">Google+</a></li>
<li id="menu-item-844" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-844"><a title="Follow me on Facebook" target="_blank" href="https://www.facebook.com/Majerle19">Facebook</a></li>
<li id="menu-item-425" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-425"><a title="My Github account" target="_blank" href="https://github.com/MaJerle">Github</a></li>
<li id="menu-item-2391" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2391"><a title="Follow me on Instagram" target="_blank" href="https://instagram.com/majerle19">Instagram</a></li>
</ul></div>

					</nav><!--/#nav-header-->

				
				

			</div><!--/.container-inner-->

		</div><!--/.container-->

		

	</header><!--/#header-->

	

	<div class="container" id="page">

		<div class="container-inner">			

			<div class="main">

				<div class="main-inner group"><section class="content">
	<div class="page-title pad group">

			<ul class="meta-single group">
			<li class="category"><a href="http://stm32f4-discovery.net/category/stm32f4-2/" rel="category tag">STM32F4</a> <span>/</span> <a href="http://stm32f4-discovery.net/category/stm32f4-discovery-2/" rel="category tag">STM32F4 Discovery</a> <span>/</span> <a href="http://stm32f4-discovery.net/category/stm32f429/" rel="category tag">STM32F429</a> <span>/</span> <a href="http://stm32f4-discovery.net/category/stm32f429-discovery/" rel="category tag">STM32F429 Discovery</a> <span>/</span> <a href="http://stm32f4-discovery.net/category/tutorials/" rel="category tag">Tutorials</a></li>
						<li class="comments"><a href="http://stm32f4-discovery.net/2014/05/stm32f4-stm32f429-discovery-pwm-tutorial/#disqus_thread" data-disqus-identifier="389 http://stm32f4-discovery.com/?p=389"><i class="fa fa-comments-o"></i><span class="dsq-postid" data-dsqidentifier="389 http://stm32f4-discovery.com/?p=389">101</span></a></li>
					</ul>
		
	
</div><!--/.page-title-->	<div class="pad group">
					<article class="post-389 post type-post status-publish format-standard has-post-thumbnail hentry category-stm32f4-2 category-stm32f4-discovery-2 category-stm32f429 category-stm32f429-discovery category-tutorials tag-168mhz tag-gpio tag-keil tag-microcontrollers tag-pwm tag-stm32f4-discovery tag-stm32f429-2 tag-stm32f429discovery tag-stm32f4xx tag-tim1 tag-tim10 tag-tim11 tag-tim12 tag-tim13 tag-tim14 tag-tim2 tag-tim3 tag-tim4 tag-tim5 tag-tim6 tag-tim7 tag-tim8 tag-tim9 tag-timers tag-uvision">
				<div class="post-inner group">
					<h1 class="post-title">STM32F4 PWM tutorial with TIMERs</h1>
					<p class="post-byline">by <a href="http://stm32f4-discovery.net/author/tilz0r/" title="Posts by tilz0R" rel="author">tilz0R</a> · May 11, 2014</p>
					

					<div style="text-align: center;">
						<script async="" src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
						<!-- stm-post-below-title -->
						<ins class="adsbygoogle" style="display:inline-block;width:728px;height:90px" data-ad-client="ca-pub-1510671897088135" data-ad-slot="7652990609"></ins>
						<script>
						(adsbygoogle = window.adsbygoogle || []).push({});
						</script>
					</div>


					<div class="clear"></div>
					<div class="entry">	
						<div class="entry-inner">
							<p>In this tutorial, I will show you, how to implement <strong>PWM</strong> outputs on STM32F4xx devices. This is for a lot of people pretty hard work, but believe me, it’s quite quick and easy. I will go step by step on how to make a PWM output on specific timer.</p>
<p><strong>Update</strong>: I made a library for PWM, available <a title="Library 33- PWM for STM32F4xx" href="http://stm32f4-discovery.com/2014/09/library-33-pwm-stm32f4xx/">here</a>.<br>
<script async="" src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><br>
<!-- stm32f4-discovery-pwm-tut --><br>
<ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-1510671897088135" data-ad-slot="2139461007" data-ad-format="auto"></ins><br>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script></p>
<h1>STM32F4&nbsp;timers</h1>
<p>They have up to 14 timers inside. Table below shows their description. You have to know, that let’s say F401 doesn’t have so many timers like F407 or F429. You have to always check manual for it’s chip if it has available timer.</p>
<table>
<tbody>
<tr>
<th>Timer</th>
<th>Type</th>
<th>Resolution</th>
<th>Prescaler</th>
<th>Channels</th>
<th>MAX INTERFACE CLOCK</th>
<th>MAX TIMER CLOCK*</th>
<th>APB</th>
</tr>
<tr class="alt">
<td>TIM1, TIM8</td>
<td>Advanced</td>
<td>16bit</td>
<td>16bit</td>
<td>4</td>
<td>SysClk/2</td>
<td>SysClk</td>
<td>2</td>
</tr>
<tr>
<td>TIM2, TIM5</td>
<td>General purpose</td>
<td>32bit</td>
<td>16bit</td>
<td>4</td>
<td>SysClk/4</td>
<td>SysClk, SysClk/2</td>
<td>1</td>
</tr>
<tr class="alt">
<td>TIM3, TIM4</td>
<td>General purpose</td>
<td>16bit</td>
<td>16bit</td>
<td>4</td>
<td>SysClk/4</td>
<td>SysClk, SysClk/2</td>
<td>1</td>
</tr>
<tr>
<td>TIM9</td>
<td>General purpose</td>
<td>16bit</td>
<td>16bit</td>
<td>2</td>
<td>SysClk/2</td>
<td>SysClk</td>
<td>2</td>
</tr>
<tr class="alt">
<td>TIM10, TIM11</td>
<td>General purpose</td>
<td>16bit</td>
<td>16bit</td>
<td>1</td>
<td>SysClk/2</td>
<td>SysClk</td>
<td>2</td>
</tr>
<tr>
<td>TIM12</td>
<td>General purpose</td>
<td>16bit</td>
<td>16bit</td>
<td>2</td>
<td>SysClk/4</td>
<td>SysClk, SysClk/2</td>
<td>1</td>
</tr>
<tr class="alt">
<td>TIM13, TIM14</td>
<td>General purpose</td>
<td>16bit</td>
<td>16bit</td>
<td>1</td>
<td>SysClk/4</td>
<td>SysClk, SysClk/2</td>
<td>1</td>
</tr>
<tr>
<td>TIM6, TIM7</td>
<td>Basic</td>
<td>16bit</td>
<td>16bit</td>
<td>0</td>
<td>SysClk/4</td>
<td>SysClk, SysClk/2</td>
<td>1</td>
</tr>
</tbody>
</table>
<blockquote><p>* Clock speed depends on which STM32F4xx device is used</p></blockquote>
<h1>Timer initialization</h1>
<p>Before we can use PWM, we have to initialize timer. Because STM32F429 Discovery board does not have leds on PWM pins, I will use STM32F4 Discovery with <strong>168MHz</strong> core clock for this example. Leds are connected to pins <strong>PD12</strong> to <strong>PD15</strong>, what give us timer <strong>TIM4</strong> with Output channels <strong>1 to 4</strong>.<span id="more-389"></span></p>
<h2>Initialize TIM4</h2>
<p>Here we will initialize timer, for our PWM frequency. We have to set prescaler and period for how fast will it count and how much it will count for specific PWM frequency.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-574c4c025c4ee775824319" class="crayon-syntax crayon-theme-keil-uvision crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; position: absolute; z-index: 2;"><span class="crayon-title">Timer initialization</span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">C</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">void TM_TIMER_Init(void) {
	TIM_TimeBaseInitTypeDef TIM_BaseStruct;
	
	/* Enable clock for TIM4 */
	RCC_APB1PeriphClockCmd(RCC_APB1Periph_TIM4, ENABLE);
/*	
	TIM4 is connected to APB1 bus, which has on F407 device 42MHz clock 				
	But, timer has internal PLL, which double this frequency for timer, up to 84MHz 	
	Remember: Not each timer is connected to APB1, there are also timers connected 	
	on APB2, which works at 84MHz by default, and internal PLL increase 				
	this to up to 168MHz 															
	
	Set timer prescaller 
	Timer count frequency is set with 
	
	timer_tick_frequency = Timer_default_frequency / (prescaller_set + 1)		
	
	In our case, we want a max frequency for timer, so we set prescaller to 0 		
	And our timer will have tick frequency		
	
	timer_tick_frequency = 84000000 / (0 + 1) = 84000000 
*/	
	TIM_BaseStruct.TIM_Prescaler = 0;
	/* Count up */
    TIM_BaseStruct.TIM_CounterMode = TIM_CounterMode_Up;
/*
	Set timer period when it have reset
	First you have to know max value for timer
	In our case it is 16bit = 65535
	To get your frequency for PWM, equation is simple
	
	PWM_frequency = timer_tick_frequency / (TIM_Period + 1)
	
	If you know your PWM frequency you want to have timer period set correct
	
	TIM_Period = timer_tick_frequency / PWM_frequency - 1
	
	In our case, for 10Khz PWM_frequency, set Period to
	
	TIM_Period = 84000000 / 10000 - 1 = 8399
	
	If you get TIM_Period larger than max timer value (in our case 65535),
	you have to choose larger prescaler and slow down timer tick frequency
*/
    TIM_BaseStruct.TIM_Period = 8399; /* 10kHz PWM */
    TIM_BaseStruct.TIM_ClockDivision = TIM_CKD_DIV1;
    TIM_BaseStruct.TIM_RepetitionCounter = 0;
	/* Initialize TIM4 */
    TIM_TimeBaseInit(TIM4, &amp;TIM_BaseStruct);
	/* Start count on TIM4 */
    TIM_Cmd(TIM4, ENABLE);
}</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row alt">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-574c4c025c4ee775824319-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c4ee775824319-2">2</div><div class="crayon-num" data-line="crayon-574c4c025c4ee775824319-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c4ee775824319-4">4</div><div class="crayon-num" data-line="crayon-574c4c025c4ee775824319-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c4ee775824319-6">6</div><div class="crayon-num" data-line="crayon-574c4c025c4ee775824319-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c4ee775824319-8">8</div><div class="crayon-num" data-line="crayon-574c4c025c4ee775824319-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c4ee775824319-10">10</div><div class="crayon-num" data-line="crayon-574c4c025c4ee775824319-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c4ee775824319-12">12</div><div class="crayon-num" data-line="crayon-574c4c025c4ee775824319-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c4ee775824319-14">14</div><div class="crayon-num" data-line="crayon-574c4c025c4ee775824319-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c4ee775824319-16">16</div><div class="crayon-num" data-line="crayon-574c4c025c4ee775824319-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c4ee775824319-18">18</div><div class="crayon-num" data-line="crayon-574c4c025c4ee775824319-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c4ee775824319-20">20</div><div class="crayon-num" data-line="crayon-574c4c025c4ee775824319-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c4ee775824319-22">22</div><div class="crayon-num" data-line="crayon-574c4c025c4ee775824319-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c4ee775824319-24">24</div><div class="crayon-num" data-line="crayon-574c4c025c4ee775824319-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c4ee775824319-26">26</div><div class="crayon-num" data-line="crayon-574c4c025c4ee775824319-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c4ee775824319-28">28</div><div class="crayon-num" data-line="crayon-574c4c025c4ee775824319-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c4ee775824319-30">30</div><div class="crayon-num" data-line="crayon-574c4c025c4ee775824319-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c4ee775824319-32">32</div><div class="crayon-num" data-line="crayon-574c4c025c4ee775824319-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c4ee775824319-34">34</div><div class="crayon-num" data-line="crayon-574c4c025c4ee775824319-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c4ee775824319-36">36</div><div class="crayon-num" data-line="crayon-574c4c025c4ee775824319-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c4ee775824319-38">38</div><div class="crayon-num" data-line="crayon-574c4c025c4ee775824319-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c4ee775824319-40">40</div><div class="crayon-num" data-line="crayon-574c4c025c4ee775824319-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c4ee775824319-42">42</div><div class="crayon-num" data-line="crayon-574c4c025c4ee775824319-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c4ee775824319-44">44</div><div class="crayon-num" data-line="crayon-574c4c025c4ee775824319-45">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c4ee775824319-46">46</div><div class="crayon-num" data-line="crayon-574c4c025c4ee775824319-47">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c4ee775824319-48">48</div><div class="crayon-num" data-line="crayon-574c4c025c4ee775824319-49">49</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c4ee775824319-50">50</div><div class="crayon-num" data-line="crayon-574c4c025c4ee775824319-51">51</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c4ee775824319-52">52</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-574c4c025c4ee775824319-1"><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">TM_TIMER_Init</span><span class="crayon-sy">(</span><span class="crayon-t">void</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c4ee775824319-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">TIM_TimeBaseInitTypeDef </span><span class="crayon-v">TIM_BaseStruct</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-574c4c025c4ee775824319-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c4ee775824319-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/* Enable clock for TIM4 */</span></div><div class="crayon-line" id="crayon-574c4c025c4ee775824319-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">RCC_APB1PeriphClockCmd</span><span class="crayon-sy">(</span><span class="crayon-v">RCC_APB1Periph_TIM4</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">ENABLE</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c4ee775824319-6"><span class="crayon-c">/*&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-574c4c025c4ee775824319-7"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;TIM4 is connected to APB1 bus, which has on F407 device 42MHz clock &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c4ee775824319-8"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;But, timer has internal PLL, which double this frequency for timer, up to 84MHz &nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-574c4c025c4ee775824319-9"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;Remember: Not each timer is connected to APB1, there are also timers connected &nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c4ee775824319-10"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;on APB2, which works at 84MHz by default, and internal PLL increase &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-574c4c025c4ee775824319-11"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;this to up to 168MHz &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c4ee775824319-12"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-574c4c025c4ee775824319-13"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;Set timer prescaller </span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c4ee775824319-14"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;Timer count frequency is set with </span></div><div class="crayon-line" id="crayon-574c4c025c4ee775824319-15"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c4ee775824319-16"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;timer_tick_frequency = Timer_default_frequency / (prescaller_set + 1)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-574c4c025c4ee775824319-17"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c4ee775824319-18"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;In our case, we want a max frequency for timer, so we set prescaller to 0 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-574c4c025c4ee775824319-19"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;And our timer will have tick frequency&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c4ee775824319-20"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-574c4c025c4ee775824319-21"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;timer_tick_frequency = 84000000 / (0 + 1) = 84000000 </span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c4ee775824319-22"><span class="crayon-c">*/</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-574c4c025c4ee775824319-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">TIM_BaseStruct</span><span class="crayon-sy">.</span><span class="crayon-v">TIM_Prescaler</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c4ee775824319-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/* Count up */</span></div><div class="crayon-line" id="crayon-574c4c025c4ee775824319-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">TIM_BaseStruct</span><span class="crayon-sy">.</span><span class="crayon-v">TIM_CounterMode</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">TIM_CounterMode_Up</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c4ee775824319-26"><span class="crayon-c">/*</span></div><div class="crayon-line" id="crayon-574c4c025c4ee775824319-27"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;Set timer period when it have reset</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c4ee775824319-28"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;First you have to know max value for timer</span></div><div class="crayon-line" id="crayon-574c4c025c4ee775824319-29"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;In our case it is 16bit = 65535</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c4ee775824319-30"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;To get your frequency for PWM, equation is simple</span></div><div class="crayon-line" id="crayon-574c4c025c4ee775824319-31"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c4ee775824319-32"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;PWM_frequency = timer_tick_frequency / (TIM_Period + 1)</span></div><div class="crayon-line" id="crayon-574c4c025c4ee775824319-33"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c4ee775824319-34"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;If you know your PWM frequency you want to have timer period set correct</span></div><div class="crayon-line" id="crayon-574c4c025c4ee775824319-35"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c4ee775824319-36"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;TIM_Period = timer_tick_frequency / PWM_frequency - 1</span></div><div class="crayon-line" id="crayon-574c4c025c4ee775824319-37"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c4ee775824319-38"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;In our case, for 10Khz PWM_frequency, set Period to</span></div><div class="crayon-line" id="crayon-574c4c025c4ee775824319-39"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c4ee775824319-40"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;TIM_Period = 84000000 / 10000 - 1 = 8399</span></div><div class="crayon-line" id="crayon-574c4c025c4ee775824319-41"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c4ee775824319-42"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;If you get TIM_Period larger than max timer value (in our case 65535),</span></div><div class="crayon-line" id="crayon-574c4c025c4ee775824319-43"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;you have to choose larger prescaler and slow down timer tick frequency</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c4ee775824319-44"><span class="crayon-c">*/</span></div><div class="crayon-line" id="crayon-574c4c025c4ee775824319-45"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">TIM_BaseStruct</span><span class="crayon-sy">.</span><span class="crayon-v">TIM_Period</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">8399</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">/* 10kHz PWM */</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c4ee775824319-46"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">TIM_BaseStruct</span><span class="crayon-sy">.</span><span class="crayon-v">TIM_ClockDivision</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">TIM_CKD_DIV1</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-574c4c025c4ee775824319-47"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">TIM_BaseStruct</span><span class="crayon-sy">.</span><span class="crayon-v">TIM_RepetitionCounter</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c4ee775824319-48"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/* Initialize TIM4 */</span></div><div class="crayon-line" id="crayon-574c4c025c4ee775824319-49"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">TIM_TimeBaseInit</span><span class="crayon-sy">(</span><span class="crayon-v">TIM4</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-v">TIM_BaseStruct</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c4ee775824319-50"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/* Start count on TIM4 */</span></div><div class="crayon-line" id="crayon-574c4c025c4ee775824319-51"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">TIM_Cmd</span><span class="crayon-sy">(</span><span class="crayon-v">TIM4</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">ENABLE</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c4ee775824319-52"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0058 seconds] -->
<p></p>
<h2>Initialize PWM 4 channels</h2>
<p>Set PWM output channels to PWM.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-574c4c025c507946897756" class="crayon-syntax crayon-theme-keil-uvision crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; position: absolute; z-index: 2;"><span class="crayon-title">PWM Settings</span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">C</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">void TM_PWM_Init(void) {
	TIM_OCInitTypeDef TIM_OCStruct;
	
	/* Common settings */
	
	/* PWM mode 2 = Clear on compare match */
	/* PWM mode 1 = Set on compare match */
	TIM_OCStruct.TIM_OCMode = TIM_OCMode_PWM2;
	TIM_OCStruct.TIM_OutputState = TIM_OutputState_Enable;
	TIM_OCStruct.TIM_OCPolarity = TIM_OCPolarity_Low;
	
/*
	To get proper duty cycle, you have simple equation
	
	pulse_length = ((TIM_Period + 1) * DutyCycle) / 100 - 1
	
	where DutyCycle is in percent, between 0 and 100%
	
	25% duty cycle: 	pulse_length = ((8399 + 1) * 25) / 100 - 1 = 2099
	50% duty cycle: 	pulse_length = ((8399 + 1) * 50) / 100 - 1 = 4199
	75% duty cycle: 	pulse_length = ((8399 + 1) * 75) / 100 - 1 = 6299
	100% duty cycle:	pulse_length = ((8399 + 1) * 100) / 100 - 1 = 8399
	
	Remember: if pulse_length is larger than TIM_Period, you will have output HIGH all the time
*/
	TIM_OCStruct.TIM_Pulse = 2099; /* 25% duty cycle */
	TIM_OC1Init(TIM4, &amp;TIM_OCStruct);
	TIM_OC1PreloadConfig(TIM4, TIM_OCPreload_Enable);
	
	TIM_OCStruct.TIM_Pulse = 4199; /* 50% duty cycle */
	TIM_OC2Init(TIM4, &amp;TIM_OCStruct);
	TIM_OC2PreloadConfig(TIM4, TIM_OCPreload_Enable);
	
	TIM_OCStruct.TIM_Pulse = 6299; /* 75% duty cycle */
	TIM_OC3Init(TIM4, &amp;TIM_OCStruct);
	TIM_OC3PreloadConfig(TIM4, TIM_OCPreload_Enable);
	
	TIM_OCStruct.TIM_Pulse = 8399; /* 100% duty cycle */
	TIM_OC4Init(TIM4, &amp;TIM_OCStruct);
	TIM_OC4PreloadConfig(TIM4, TIM_OCPreload_Enable);
}</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-574c4c025c507946897756-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c507946897756-2">2</div><div class="crayon-num" data-line="crayon-574c4c025c507946897756-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c507946897756-4">4</div><div class="crayon-num" data-line="crayon-574c4c025c507946897756-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c507946897756-6">6</div><div class="crayon-num" data-line="crayon-574c4c025c507946897756-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c507946897756-8">8</div><div class="crayon-num" data-line="crayon-574c4c025c507946897756-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c507946897756-10">10</div><div class="crayon-num" data-line="crayon-574c4c025c507946897756-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c507946897756-12">12</div><div class="crayon-num" data-line="crayon-574c4c025c507946897756-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c507946897756-14">14</div><div class="crayon-num" data-line="crayon-574c4c025c507946897756-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c507946897756-16">16</div><div class="crayon-num" data-line="crayon-574c4c025c507946897756-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c507946897756-18">18</div><div class="crayon-num" data-line="crayon-574c4c025c507946897756-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c507946897756-20">20</div><div class="crayon-num" data-line="crayon-574c4c025c507946897756-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c507946897756-22">22</div><div class="crayon-num" data-line="crayon-574c4c025c507946897756-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c507946897756-24">24</div><div class="crayon-num" data-line="crayon-574c4c025c507946897756-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c507946897756-26">26</div><div class="crayon-num" data-line="crayon-574c4c025c507946897756-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c507946897756-28">28</div><div class="crayon-num" data-line="crayon-574c4c025c507946897756-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c507946897756-30">30</div><div class="crayon-num" data-line="crayon-574c4c025c507946897756-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c507946897756-32">32</div><div class="crayon-num" data-line="crayon-574c4c025c507946897756-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c507946897756-34">34</div><div class="crayon-num" data-line="crayon-574c4c025c507946897756-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c507946897756-36">36</div><div class="crayon-num" data-line="crayon-574c4c025c507946897756-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c507946897756-38">38</div><div class="crayon-num" data-line="crayon-574c4c025c507946897756-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c507946897756-40">40</div><div class="crayon-num" data-line="crayon-574c4c025c507946897756-41">41</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-574c4c025c507946897756-1"><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">TM_PWM_Init</span><span class="crayon-sy">(</span><span class="crayon-t">void</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c507946897756-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">TIM_OCInitTypeDef </span><span class="crayon-v">TIM_OCStruct</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-574c4c025c507946897756-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c507946897756-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/* Common settings */</span></div><div class="crayon-line" id="crayon-574c4c025c507946897756-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c507946897756-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/* PWM mode 2 = Clear on compare match */</span></div><div class="crayon-line" id="crayon-574c4c025c507946897756-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/* PWM mode 1 = Set on compare match */</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c507946897756-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">TIM_OCStruct</span><span class="crayon-sy">.</span><span class="crayon-v">TIM_OCMode</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">TIM_OCMode_PWM2</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-574c4c025c507946897756-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">TIM_OCStruct</span><span class="crayon-sy">.</span><span class="crayon-v">TIM_OutputState</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">TIM_OutputState_Enable</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c507946897756-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">TIM_OCStruct</span><span class="crayon-sy">.</span><span class="crayon-v">TIM_OCPolarity</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">TIM_OCPolarity_Low</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-574c4c025c507946897756-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c507946897756-12"><span class="crayon-c">/*</span></div><div class="crayon-line" id="crayon-574c4c025c507946897756-13"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;To get proper duty cycle, you have simple equation</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c507946897756-14"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-574c4c025c507946897756-15"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;pulse_length = ((TIM_Period + 1) * DutyCycle) / 100 - 1</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c507946897756-16"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-574c4c025c507946897756-17"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;where DutyCycle is in percent, between 0 and 100%</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c507946897756-18"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-574c4c025c507946897756-19"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;25% duty cycle: &nbsp;&nbsp;&nbsp;&nbsp;pulse_length = ((8399 + 1) * 25) / 100 - 1 = 2099</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c507946897756-20"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;50% duty cycle: &nbsp;&nbsp;&nbsp;&nbsp;pulse_length = ((8399 + 1) * 50) / 100 - 1 = 4199</span></div><div class="crayon-line" id="crayon-574c4c025c507946897756-21"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;75% duty cycle: &nbsp;&nbsp;&nbsp;&nbsp;pulse_length = ((8399 + 1) * 75) / 100 - 1 = 6299</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c507946897756-22"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;100% duty cycle:&nbsp;&nbsp;&nbsp;&nbsp;pulse_length = ((8399 + 1) * 100) / 100 - 1 = 8399</span></div><div class="crayon-line" id="crayon-574c4c025c507946897756-23"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c507946897756-24"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;Remember: if pulse_length is larger than TIM_Period, you will have output HIGH all the time</span></div><div class="crayon-line" id="crayon-574c4c025c507946897756-25"><span class="crayon-c">*/</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c507946897756-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">TIM_OCStruct</span><span class="crayon-sy">.</span><span class="crayon-v">TIM_Pulse</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">2099</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">/* 25% duty cycle */</span></div><div class="crayon-line" id="crayon-574c4c025c507946897756-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">TIM_OC1Init</span><span class="crayon-sy">(</span><span class="crayon-v">TIM4</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-v">TIM_OCStruct</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c507946897756-28"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">TIM_OC1PreloadConfig</span><span class="crayon-sy">(</span><span class="crayon-v">TIM4</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">TIM_OCPreload_Enable</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-574c4c025c507946897756-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c507946897756-30"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">TIM_OCStruct</span><span class="crayon-sy">.</span><span class="crayon-v">TIM_Pulse</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">4199</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">/* 50% duty cycle */</span></div><div class="crayon-line" id="crayon-574c4c025c507946897756-31"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">TIM_OC2Init</span><span class="crayon-sy">(</span><span class="crayon-v">TIM4</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-v">TIM_OCStruct</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c507946897756-32"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">TIM_OC2PreloadConfig</span><span class="crayon-sy">(</span><span class="crayon-v">TIM4</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">TIM_OCPreload_Enable</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-574c4c025c507946897756-33"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c507946897756-34"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">TIM_OCStruct</span><span class="crayon-sy">.</span><span class="crayon-v">TIM_Pulse</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">6299</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">/* 75% duty cycle */</span></div><div class="crayon-line" id="crayon-574c4c025c507946897756-35"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">TIM_OC3Init</span><span class="crayon-sy">(</span><span class="crayon-v">TIM4</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-v">TIM_OCStruct</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c507946897756-36"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">TIM_OC3PreloadConfig</span><span class="crayon-sy">(</span><span class="crayon-v">TIM4</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">TIM_OCPreload_Enable</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-574c4c025c507946897756-37"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c507946897756-38"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">TIM_OCStruct</span><span class="crayon-sy">.</span><span class="crayon-v">TIM_Pulse</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">8399</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">/* 100% duty cycle */</span></div><div class="crayon-line" id="crayon-574c4c025c507946897756-39"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">TIM_OC4Init</span><span class="crayon-sy">(</span><span class="crayon-v">TIM4</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-v">TIM_OCStruct</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c507946897756-40"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">TIM_OC4PreloadConfig</span><span class="crayon-sy">(</span><span class="crayon-v">TIM4</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">TIM_OCPreload_Enable</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-574c4c025c507946897756-41"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0082 seconds] -->
<p></p>
<h1>Initialize outputs</h1>
<p>Initialize and connect pins for specific TIM. Notice, that GPIOs have AF (Alternating Function) mode, because timer has full control on them.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-574c4c025c512854471931" class="crayon-syntax crayon-theme-keil-uvision crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; position: absolute; z-index: 2;"><span class="crayon-title">Initialize LEDs</span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button crayon-pressed" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">C</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important; margin-top: -18px; display: none;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 1; opacity: 1; overflow: hidden; height: 300px;">void TM_LEDS_Init(void) {
	GPIO_InitTypeDef GPIO_InitStruct;
	
	/* Clock for GPIOD */
    RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOD, ENABLE);

	/* Alternating functions for pins */
	GPIO_PinAFConfig(GPIOD, GPIO_PinSource12, GPIO_AF_TIM4);
	GPIO_PinAFConfig(GPIOD, GPIO_PinSource13, GPIO_AF_TIM4);
	GPIO_PinAFConfig(GPIOD, GPIO_PinSource14, GPIO_AF_TIM4);
	GPIO_PinAFConfig(GPIOD, GPIO_PinSource15, GPIO_AF_TIM4);
	
	/* Set pins */
	GPIO_InitStruct.GPIO_Pin = GPIO_Pin_12 | GPIO_Pin_13 | GPIO_Pin_14 | GPIO_Pin_15;
	GPIO_InitStruct.GPIO_OType = GPIO_OType_PP;
	GPIO_InitStruct.GPIO_PuPd = GPIO_PuPd_NOPULL;
    GPIO_InitStruct.GPIO_Mode = GPIO_Mode_AF;
    GPIO_InitStruct.GPIO_Speed = GPIO_Speed_100MHz;
    GPIO_Init(GPIOD, &amp;GPIO_InitStruct);
}</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 0; overflow: hidden; opacity: 0;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row alt">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-574c4c025c512854471931-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c512854471931-2">2</div><div class="crayon-num" data-line="crayon-574c4c025c512854471931-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c512854471931-4">4</div><div class="crayon-num" data-line="crayon-574c4c025c512854471931-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c512854471931-6">6</div><div class="crayon-num" data-line="crayon-574c4c025c512854471931-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c512854471931-8">8</div><div class="crayon-num" data-line="crayon-574c4c025c512854471931-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c512854471931-10">10</div><div class="crayon-num" data-line="crayon-574c4c025c512854471931-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c512854471931-12">12</div><div class="crayon-num" data-line="crayon-574c4c025c512854471931-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c512854471931-14">14</div><div class="crayon-num" data-line="crayon-574c4c025c512854471931-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c512854471931-16">16</div><div class="crayon-num" data-line="crayon-574c4c025c512854471931-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c512854471931-18">18</div><div class="crayon-num" data-line="crayon-574c4c025c512854471931-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c512854471931-20">20</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-574c4c025c512854471931-1"><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">TM_LEDS_Init</span><span class="crayon-sy">(</span><span class="crayon-t">void</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c512854471931-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">GPIO_InitTypeDef </span><span class="crayon-v">GPIO_InitStruct</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-574c4c025c512854471931-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c512854471931-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/* Clock for GPIOD */</span></div><div class="crayon-line" id="crayon-574c4c025c512854471931-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">RCC_AHB1PeriphClockCmd</span><span class="crayon-sy">(</span><span class="crayon-v">RCC_AHB1Periph_GPIOD</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">ENABLE</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c512854471931-6">&nbsp;</div><div class="crayon-line" id="crayon-574c4c025c512854471931-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/* Alternating functions for pins */</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c512854471931-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">GPIO_PinAFConfig</span><span class="crayon-sy">(</span><span class="crayon-v">GPIOD</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">GPIO_PinSource12</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">GPIO_AF_TIM4</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-574c4c025c512854471931-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">GPIO_PinAFConfig</span><span class="crayon-sy">(</span><span class="crayon-v">GPIOD</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">GPIO_PinSource13</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">GPIO_AF_TIM4</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c512854471931-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">GPIO_PinAFConfig</span><span class="crayon-sy">(</span><span class="crayon-v">GPIOD</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">GPIO_PinSource14</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">GPIO_AF_TIM4</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-574c4c025c512854471931-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">GPIO_PinAFConfig</span><span class="crayon-sy">(</span><span class="crayon-v">GPIOD</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">GPIO_PinSource15</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">GPIO_AF_TIM4</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c512854471931-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-574c4c025c512854471931-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/* Set pins */</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c512854471931-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">GPIO_InitStruct</span><span class="crayon-sy">.</span><span class="crayon-v">GPIO_Pin</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">GPIO_Pin_12</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">GPIO_Pin_13</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">GPIO_Pin_14</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">GPIO_Pin_15</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-574c4c025c512854471931-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">GPIO_InitStruct</span><span class="crayon-sy">.</span><span class="crayon-v">GPIO_OType</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">GPIO_OType_PP</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c512854471931-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">GPIO_InitStruct</span><span class="crayon-sy">.</span><span class="crayon-v">GPIO_PuPd</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">GPIO_PuPd_NOPULL</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-574c4c025c512854471931-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">GPIO_InitStruct</span><span class="crayon-sy">.</span><span class="crayon-v">GPIO_Mode</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">GPIO_Mode_AF</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c512854471931-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">GPIO_InitStruct</span><span class="crayon-sy">.</span><span class="crayon-v">GPIO_Speed</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">GPIO_Speed_100MHz</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-574c4c025c512854471931-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">GPIO_Init</span><span class="crayon-sy">(</span><span class="crayon-v">GPIOD</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-v">GPIO_InitStruct</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c512854471931-20"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0067 seconds] -->
<p></p>
<h1>Example</h1>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-574c4c025c51c429981775" class="crayon-syntax crayon-theme-keil-uvision crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; position: absolute; z-index: 2;"><span class="crayon-title">PWM Example</span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button crayon-pressed" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">C</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important; margin-top: -18px; display: none;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 1; opacity: 1; overflow: hidden; height: 2175px;">/**
 *	PWM example for STM32F4 Discovery
 *	It should work on STM32F429 Discovery too and all other STM32F4xx devices
 *
 *	@author 	Tilen Majerle
 *	@email		tilen@majerle.eu
 *	@website	http://stm32f4-discovery.com
 *	@ide		Keil uVision 5
 */
#include "defines.h"
#include "stm32f4xx.h"
#include "stm32f4xx_rcc.h"
#include "stm32f4xx_gpio.h"
#include "stm32f4xx_tim.h"

void TM_LEDS_Init(void) {
	GPIO_InitTypeDef GPIO_InitStruct;
	
	/* Clock for GPIOD */
    RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOD, ENABLE);

	/* Alternating functions for pins */
	GPIO_PinAFConfig(GPIOD, GPIO_PinSource12, GPIO_AF_TIM4);
	GPIO_PinAFConfig(GPIOD, GPIO_PinSource13, GPIO_AF_TIM4);
	GPIO_PinAFConfig(GPIOD, GPIO_PinSource14, GPIO_AF_TIM4);
	GPIO_PinAFConfig(GPIOD, GPIO_PinSource15, GPIO_AF_TIM4);
	
	/* Set pins */
	GPIO_InitStruct.GPIO_Pin = GPIO_Pin_12 | GPIO_Pin_13 | GPIO_Pin_14 | GPIO_Pin_15;
	GPIO_InitStruct.GPIO_OType = GPIO_OType_PP;
	GPIO_InitStruct.GPIO_PuPd = GPIO_PuPd_NOPULL;
    GPIO_InitStruct.GPIO_Mode = GPIO_Mode_AF;
    GPIO_InitStruct.GPIO_Speed = GPIO_Speed_100MHz;
    GPIO_Init(GPIOD, &amp;GPIO_InitStruct);
}

void TM_TIMER_Init(void) {
	TIM_TimeBaseInitTypeDef TIM_BaseStruct;
	
	/* Enable clock for TIM4 */
	RCC_APB1PeriphClockCmd(RCC_APB1Periph_TIM4, ENABLE);
/*	
	TIM4 is connected to APB1 bus, which has on F407 device 42MHz clock 				
	But, timer has internal PLL, which double this frequency for timer, up to 84MHz 	
	Remember: Not each timer is connected to APB1, there are also timers connected 	
	on APB2, which works at 84MHz by default, and internal PLL increase 				
	this to up to 168MHz 															
	
	Set timer prescaller 
	Timer count frequency is set with 
	
	timer_tick_frequency = Timer_default_frequency / (prescaller_set + 1)		
	
	In our case, we want a max frequency for timer, so we set prescaller to 0 		
	And our timer will have tick frequency		
	
	timer_tick_frequency = 84000000 / (0 + 1) = 84000000 
*/	
	TIM_BaseStruct.TIM_Prescaler = 0;
	/* Count up */
    TIM_BaseStruct.TIM_CounterMode = TIM_CounterMode_Up;
/*
	Set timer period when it have reset
	First you have to know max value for timer
	In our case it is 16bit = 65535
	To get your frequency for PWM, equation is simple
	
	PWM_frequency = timer_tick_frequency / (TIM_Period + 1)
	
	If you know your PWM frequency you want to have timer period set correct
	
	TIM_Period = timer_tick_frequency / PWM_frequency - 1
	
	In our case, for 10Khz PWM_frequency, set Period to
	
	TIM_Period = 84000000 / 10000 - 1 = 8399
	
	If you get TIM_Period larger than max timer value (in our case 65535),
	you have to choose larger prescaler and slow down timer tick frequency
*/
    TIM_BaseStruct.TIM_Period = 8399; /* 10kHz PWM */
    TIM_BaseStruct.TIM_ClockDivision = TIM_CKD_DIV1;
    TIM_BaseStruct.TIM_RepetitionCounter = 0;
	/* Initialize TIM4 */
    TIM_TimeBaseInit(TIM4, &amp;TIM_BaseStruct);
	/* Start count on TIM4 */
    TIM_Cmd(TIM4, ENABLE);
}

void TM_PWM_Init(void) {
	TIM_OCInitTypeDef TIM_OCStruct;
	
	/* Common settings */
	
	/* PWM mode 2 = Clear on compare match */
	/* PWM mode 1 = Set on compare match */
	TIM_OCStruct.TIM_OCMode = TIM_OCMode_PWM2;
	TIM_OCStruct.TIM_OutputState = TIM_OutputState_Enable;
	TIM_OCStruct.TIM_OCPolarity = TIM_OCPolarity_Low;
	
/*
	To get proper duty cycle, you have simple equation
	
	pulse_length = ((TIM_Period + 1) * DutyCycle) / 100 - 1
	
	where DutyCycle is in percent, between 0 and 100%
	
	25% duty cycle: 	pulse_length = ((8399 + 1) * 25) / 100 - 1 = 2099
	50% duty cycle: 	pulse_length = ((8399 + 1) * 50) / 100 - 1 = 4199
	75% duty cycle: 	pulse_length = ((8399 + 1) * 75) / 100 - 1 = 6299
	100% duty cycle:	pulse_length = ((8399 + 1) * 100) / 100 - 1 = 8399
	
	Remember: if pulse_length is larger than TIM_Period, you will have output HIGH all the time
*/
	TIM_OCStruct.TIM_Pulse = 2099; /* 25% duty cycle */
	TIM_OC1Init(TIM4, &amp;TIM_OCStruct);
	TIM_OC1PreloadConfig(TIM4, TIM_OCPreload_Enable);
	
	TIM_OCStruct.TIM_Pulse = 4199; /* 50% duty cycle */
	TIM_OC2Init(TIM4, &amp;TIM_OCStruct);
	TIM_OC2PreloadConfig(TIM4, TIM_OCPreload_Enable);
	
	TIM_OCStruct.TIM_Pulse = 6299; /* 75% duty cycle */
	TIM_OC3Init(TIM4, &amp;TIM_OCStruct);
	TIM_OC3PreloadConfig(TIM4, TIM_OCPreload_Enable);
	
	TIM_OCStruct.TIM_Pulse = 8399; /* 100% duty cycle */
	TIM_OC4Init(TIM4, &amp;TIM_OCStruct);
	TIM_OC4PreloadConfig(TIM4, TIM_OCPreload_Enable);
}

int main(void) {
	/* Initialize system */
	SystemInit();
	/* Init leds */
	TM_LEDS_Init();
	/* Init timer */
	TM_TIMER_Init();
	/* Init PWM */
	TM_PWM_Init();
	
	while (1) {

	}
}</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 0; overflow: hidden; opacity: 0;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-2">2</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-4">4</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-6">6</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-8">8</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-10">10</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-12">12</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-14">14</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-16">16</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-18">18</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-20">20</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-22">22</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-24">24</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-26">26</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-28">28</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-30">30</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-32">32</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-34">34</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-36">36</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-38">38</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-40">40</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-42">42</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-44">44</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-45">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-46">46</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-47">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-48">48</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-49">49</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-50">50</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-51">51</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-52">52</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-53">53</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-54">54</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-55">55</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-56">56</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-57">57</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-58">58</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-59">59</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-60">60</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-61">61</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-62">62</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-63">63</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-64">64</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-65">65</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-66">66</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-67">67</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-68">68</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-69">69</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-70">70</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-71">71</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-72">72</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-73">73</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-74">74</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-75">75</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-76">76</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-77">77</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-78">78</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-79">79</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-80">80</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-81">81</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-82">82</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-83">83</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-84">84</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-85">85</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-86">86</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-87">87</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-88">88</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-89">89</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-90">90</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-91">91</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-92">92</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-93">93</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-94">94</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-95">95</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-96">96</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-97">97</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-98">98</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-99">99</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-100">100</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-101">101</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-102">102</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-103">103</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-104">104</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-105">105</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-106">106</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-107">107</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-108">108</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-109">109</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-110">110</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-111">111</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-112">112</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-113">113</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-114">114</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-115">115</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-116">116</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-117">117</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-118">118</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-119">119</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-120">120</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-121">121</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-122">122</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-123">123</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-124">124</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-125">125</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-126">126</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-127">127</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-128">128</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-129">129</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-130">130</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-131">131</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-132">132</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-133">133</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-134">134</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-135">135</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-136">136</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-137">137</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-138">138</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-139">139</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-140">140</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-141">141</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-142">142</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-143">143</div><div class="crayon-num crayon-striped-num" data-line="crayon-574c4c025c51c429981775-144">144</div><div class="crayon-num" data-line="crayon-574c4c025c51c429981775-145">145</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-574c4c025c51c429981775-1"><span class="crayon-c">/**</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-2"><span class="crayon-c"> *&nbsp;&nbsp;&nbsp;&nbsp;PWM example for STM32F4 Discovery</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-3"><span class="crayon-c"> *&nbsp;&nbsp;&nbsp;&nbsp;It should work on STM32F429 Discovery too and all other STM32F4xx devices</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-4"><span class="crayon-c"> *</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-5"><span class="crayon-c"> *&nbsp;&nbsp;&nbsp;&nbsp;@author &nbsp;&nbsp;&nbsp;&nbsp;Tilen Majerle</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-6"><span class="crayon-c"> *&nbsp;&nbsp;&nbsp;&nbsp;@email&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tilen@majerle.eu</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-7"><span class="crayon-c"> *&nbsp;&nbsp;&nbsp;&nbsp;@website&nbsp;&nbsp;&nbsp;&nbsp;http://stm32f4-discovery.com</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-8"><span class="crayon-c"> *&nbsp;&nbsp;&nbsp;&nbsp;@ide&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Keil uVision 5</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-9"><span class="crayon-c"> */</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-10"><span class="crayon-p">#include "defines.h"</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-11"><span class="crayon-p">#include "stm32f4xx.h"</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-12"><span class="crayon-p">#include "stm32f4xx_rcc.h"</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-13"><span class="crayon-p">#include "stm32f4xx_gpio.h"</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-14"><span class="crayon-p">#include "stm32f4xx_tim.h"</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-15">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-16"><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">TM_LEDS_Init</span><span class="crayon-sy">(</span><span class="crayon-t">void</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">GPIO_InitTypeDef </span><span class="crayon-v">GPIO_InitStruct</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/* Clock for GPIOD */</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">RCC_AHB1PeriphClockCmd</span><span class="crayon-sy">(</span><span class="crayon-v">RCC_AHB1Periph_GPIOD</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">ENABLE</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-21">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/* Alternating functions for pins */</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">GPIO_PinAFConfig</span><span class="crayon-sy">(</span><span class="crayon-v">GPIOD</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">GPIO_PinSource12</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">GPIO_AF_TIM4</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">GPIO_PinAFConfig</span><span class="crayon-sy">(</span><span class="crayon-v">GPIOD</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">GPIO_PinSource13</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">GPIO_AF_TIM4</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">GPIO_PinAFConfig</span><span class="crayon-sy">(</span><span class="crayon-v">GPIOD</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">GPIO_PinSource14</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">GPIO_AF_TIM4</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">GPIO_PinAFConfig</span><span class="crayon-sy">(</span><span class="crayon-v">GPIOD</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">GPIO_PinSource15</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">GPIO_AF_TIM4</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-28"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/* Set pins */</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">GPIO_InitStruct</span><span class="crayon-sy">.</span><span class="crayon-v">GPIO_Pin</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">GPIO_Pin_12</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">GPIO_Pin_13</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">GPIO_Pin_14</span><span class="crayon-h"> </span><span class="crayon-o">|</span><span class="crayon-h"> </span><span class="crayon-v">GPIO_Pin_15</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-30"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">GPIO_InitStruct</span><span class="crayon-sy">.</span><span class="crayon-v">GPIO_OType</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">GPIO_OType_PP</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-31"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">GPIO_InitStruct</span><span class="crayon-sy">.</span><span class="crayon-v">GPIO_PuPd</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">GPIO_PuPd_NOPULL</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-32"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">GPIO_InitStruct</span><span class="crayon-sy">.</span><span class="crayon-v">GPIO_Mode</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">GPIO_Mode_AF</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-33"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">GPIO_InitStruct</span><span class="crayon-sy">.</span><span class="crayon-v">GPIO_Speed</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">GPIO_Speed_100MHz</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-34"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">GPIO_Init</span><span class="crayon-sy">(</span><span class="crayon-v">GPIOD</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-v">GPIO_InitStruct</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-35"><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-36">&nbsp;</div><div class="crayon-line" id="crayon-574c4c025c51c429981775-37"><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">TM_TIMER_Init</span><span class="crayon-sy">(</span><span class="crayon-t">void</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-38"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">TIM_TimeBaseInitTypeDef </span><span class="crayon-v">TIM_BaseStruct</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-39"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-40"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/* Enable clock for TIM4 */</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-41"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">RCC_APB1PeriphClockCmd</span><span class="crayon-sy">(</span><span class="crayon-v">RCC_APB1Periph_TIM4</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">ENABLE</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-42"><span class="crayon-c">/*&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-43"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;TIM4 is connected to APB1 bus, which has on F407 device 42MHz clock &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-44"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;But, timer has internal PLL, which double this frequency for timer, up to 84MHz &nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-45"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;Remember: Not each timer is connected to APB1, there are also timers connected &nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-46"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;on APB2, which works at 84MHz by default, and internal PLL increase &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-47"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;this to up to 168MHz &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-48"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-49"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;Set timer prescaller </span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-50"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;Timer count frequency is set with </span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-51"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-52"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;timer_tick_frequency = Timer_default_frequency / (prescaller_set + 1)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-53"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-54"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;In our case, we want a max frequency for timer, so we set prescaller to 0 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-55"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;And our timer will have tick frequency&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-56"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-57"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;timer_tick_frequency = 84000000 / (0 + 1) = 84000000 </span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-58"><span class="crayon-c">*/</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-59"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">TIM_BaseStruct</span><span class="crayon-sy">.</span><span class="crayon-v">TIM_Prescaler</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-60"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/* Count up */</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-61"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">TIM_BaseStruct</span><span class="crayon-sy">.</span><span class="crayon-v">TIM_CounterMode</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">TIM_CounterMode_Up</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-62"><span class="crayon-c">/*</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-63"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;Set timer period when it have reset</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-64"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;First you have to know max value for timer</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-65"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;In our case it is 16bit = 65535</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-66"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;To get your frequency for PWM, equation is simple</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-67"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-68"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;PWM_frequency = timer_tick_frequency / (TIM_Period + 1)</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-69"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-70"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;If you know your PWM frequency you want to have timer period set correct</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-71"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-72"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;TIM_Period = timer_tick_frequency / PWM_frequency - 1</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-73"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-74"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;In our case, for 10Khz PWM_frequency, set Period to</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-75"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-76"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;TIM_Period = 84000000 / 10000 - 1 = 8399</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-77"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-78"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;If you get TIM_Period larger than max timer value (in our case 65535),</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-79"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;you have to choose larger prescaler and slow down timer tick frequency</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-80"><span class="crayon-c">*/</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-81"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">TIM_BaseStruct</span><span class="crayon-sy">.</span><span class="crayon-v">TIM_Period</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">8399</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">/* 10kHz PWM */</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-82"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">TIM_BaseStruct</span><span class="crayon-sy">.</span><span class="crayon-v">TIM_ClockDivision</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">TIM_CKD_DIV1</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-83"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">TIM_BaseStruct</span><span class="crayon-sy">.</span><span class="crayon-v">TIM_RepetitionCounter</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-84"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/* Initialize TIM4 */</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-85"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">TIM_TimeBaseInit</span><span class="crayon-sy">(</span><span class="crayon-v">TIM4</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-v">TIM_BaseStruct</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-86"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/* Start count on TIM4 */</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-87"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">TIM_Cmd</span><span class="crayon-sy">(</span><span class="crayon-v">TIM4</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">ENABLE</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-88"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-89">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-90"><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">TM_PWM_Init</span><span class="crayon-sy">(</span><span class="crayon-t">void</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-91"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">TIM_OCInitTypeDef </span><span class="crayon-v">TIM_OCStruct</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-92"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-93"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/* Common settings */</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-94"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-95"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/* PWM mode 2 = Clear on compare match */</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-96"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/* PWM mode 1 = Set on compare match */</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-97"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">TIM_OCStruct</span><span class="crayon-sy">.</span><span class="crayon-v">TIM_OCMode</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">TIM_OCMode_PWM2</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-98"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">TIM_OCStruct</span><span class="crayon-sy">.</span><span class="crayon-v">TIM_OutputState</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">TIM_OutputState_Enable</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-99"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">TIM_OCStruct</span><span class="crayon-sy">.</span><span class="crayon-v">TIM_OCPolarity</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">TIM_OCPolarity_Low</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-100"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-101"><span class="crayon-c">/*</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-102"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;To get proper duty cycle, you have simple equation</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-103"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-104"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;pulse_length = ((TIM_Period + 1) * DutyCycle) / 100 - 1</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-105"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-106"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;where DutyCycle is in percent, between 0 and 100%</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-107"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-108"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;25% duty cycle: &nbsp;&nbsp;&nbsp;&nbsp;pulse_length = ((8399 + 1) * 25) / 100 - 1 = 2099</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-109"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;50% duty cycle: &nbsp;&nbsp;&nbsp;&nbsp;pulse_length = ((8399 + 1) * 50) / 100 - 1 = 4199</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-110"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;75% duty cycle: &nbsp;&nbsp;&nbsp;&nbsp;pulse_length = ((8399 + 1) * 75) / 100 - 1 = 6299</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-111"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;100% duty cycle:&nbsp;&nbsp;&nbsp;&nbsp;pulse_length = ((8399 + 1) * 100) / 100 - 1 = 8399</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-112"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-113"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;Remember: if pulse_length is larger than TIM_Period, you will have output HIGH all the time</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-114"><span class="crayon-c">*/</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-115"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">TIM_OCStruct</span><span class="crayon-sy">.</span><span class="crayon-v">TIM_Pulse</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">2099</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">/* 25% duty cycle */</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-116"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">TIM_OC1Init</span><span class="crayon-sy">(</span><span class="crayon-v">TIM4</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-v">TIM_OCStruct</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-117"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">TIM_OC1PreloadConfig</span><span class="crayon-sy">(</span><span class="crayon-v">TIM4</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">TIM_OCPreload_Enable</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-118"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-119"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">TIM_OCStruct</span><span class="crayon-sy">.</span><span class="crayon-v">TIM_Pulse</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">4199</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">/* 50% duty cycle */</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-120"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">TIM_OC2Init</span><span class="crayon-sy">(</span><span class="crayon-v">TIM4</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-v">TIM_OCStruct</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-121"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">TIM_OC2PreloadConfig</span><span class="crayon-sy">(</span><span class="crayon-v">TIM4</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">TIM_OCPreload_Enable</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-122"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-123"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">TIM_OCStruct</span><span class="crayon-sy">.</span><span class="crayon-v">TIM_Pulse</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">6299</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">/* 75% duty cycle */</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-124"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">TIM_OC3Init</span><span class="crayon-sy">(</span><span class="crayon-v">TIM4</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-v">TIM_OCStruct</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-125"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">TIM_OC3PreloadConfig</span><span class="crayon-sy">(</span><span class="crayon-v">TIM4</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">TIM_OCPreload_Enable</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-126"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-127"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">TIM_OCStruct</span><span class="crayon-sy">.</span><span class="crayon-v">TIM_Pulse</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">8399</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">/* 100% duty cycle */</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-128"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">TIM_OC4Init</span><span class="crayon-sy">(</span><span class="crayon-v">TIM4</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-v">TIM_OCStruct</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-129"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">TIM_OC4PreloadConfig</span><span class="crayon-sy">(</span><span class="crayon-v">TIM4</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">TIM_OCPreload_Enable</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-130"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-131">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-132"><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-e">main</span><span class="crayon-sy">(</span><span class="crayon-t">void</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-133"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/* Initialize system */</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-134"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">SystemInit</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-135"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/* Init leds */</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-136"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">TM_LEDS_Init</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-137"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/* Init timer */</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-138"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">TM_TIMER_Init</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-139"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/* Init PWM */</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-140"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">TM_PWM_Init</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-141"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-142"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">while</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-143">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-574c4c025c51c429981775-144"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-574c4c025c51c429981775-145"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0222 seconds] -->
<p>That’s it. You have not set your timer to work in PWM mode.</p>
<p>Hope it helps.</p>
<div class="sharedaddy sd-sharing-enabled"><div class="robots-nocontent sd-block sd-social sd-social-icon sd-sharing"><h3 class="sd-title">Share this to other users:</h3><div class="sd-content"><ul><li class="share-print"><a rel="nofollow" data-shared="" class="share-print sd-button share-icon no-text" href="http://stm32f4-discovery.net/2014/05/stm32f4-stm32f429-discovery-pwm-tutorial/#print" target="_blank" title="Click to print"><span></span><span class="sharing-screen-reader-text">Click to print (Opens in new window)</span></a></li><li class="share-email share-service-visible"><a rel="nofollow" data-shared="" class="share-email sd-button share-icon no-text" href="http://stm32f4-discovery.net/2014/05/stm32f4-stm32f429-discovery-pwm-tutorial/?share=email&amp;nb=1" target="_blank" title="Click to email this to a friend"><span></span><span class="sharing-screen-reader-text">Click to email this to a friend (Opens in new window)</span></a></li><li class="share-facebook"><a rel="nofollow" data-shared="sharing-facebook-389" class="share-facebook sd-button share-icon no-text" href="http://stm32f4-discovery.net/2014/05/stm32f4-stm32f429-discovery-pwm-tutorial/?share=facebook&amp;nb=1" target="_blank" title="Click to share on Facebook"><span></span><span class="sharing-screen-reader-text">Click to share on Facebook (Opens in new window)</span></a></li><li class="share-google-plus-1"><a rel="nofollow" data-shared="sharing-google-389" class="share-google-plus-1 sd-button share-icon no-text" href="http://stm32f4-discovery.net/2014/05/stm32f4-stm32f429-discovery-pwm-tutorial/?share=google-plus-1&amp;nb=1" target="_blank" title="Click to share on Google+"><span></span><span class="sharing-screen-reader-text">Click to share on Google+ (Opens in new window)</span></a></li><li class="share-twitter"><a rel="nofollow" data-shared="sharing-twitter-389" class="share-twitter sd-button share-icon no-text" href="http://stm32f4-discovery.net/2014/05/stm32f4-stm32f429-discovery-pwm-tutorial/?share=twitter&amp;nb=1" target="_blank" title="Click to share on Twitter"><span></span><span class="sharing-screen-reader-text">Click to share on Twitter (Opens in new window)</span></a></li><li class="share-linkedin"><a rel="nofollow" data-shared="sharing-linkedin-389" class="share-linkedin sd-button share-icon no-text" href="http://stm32f4-discovery.net/2014/05/stm32f4-stm32f429-discovery-pwm-tutorial/?share=linkedin&amp;nb=1" target="_blank" title="Click to share on LinkedIn"><span></span><span class="sharing-screen-reader-text">Click to share on LinkedIn (Opens in new window)</span></a></li><li class="share-pinterest"><a rel="nofollow" data-shared="sharing-pinterest-389" class="share-pinterest sd-button share-icon no-text" href="http://stm32f4-discovery.net/2014/05/stm32f4-stm32f429-discovery-pwm-tutorial/?share=pinterest&amp;nb=1" target="_blank" title="Click to share on Pinterest"><span></span><span class="sharing-screen-reader-text">Click to share on Pinterest (Opens in new window)</span></a></li><li class="share-tumblr"><a rel="nofollow" data-shared="" class="share-tumblr sd-button share-icon no-text" href="http://stm32f4-discovery.net/2014/05/stm32f4-stm32f429-discovery-pwm-tutorial/?share=tumblr&amp;nb=1" target="_blank" title="Click to share on Tumblr"><span></span><span class="sharing-screen-reader-text">Click to share on Tumblr (Opens in new window)</span></a></li><li class="share-reddit"><a rel="nofollow" data-shared="" class="share-reddit sd-button share-icon no-text" href="http://stm32f4-discovery.net/2014/05/stm32f4-stm32f429-discovery-pwm-tutorial/?share=reddit&amp;nb=1" target="_blank" title="Click to share on Reddit"><span></span><span class="sharing-screen-reader-text">Click to share on Reddit (Opens in new window)</span></a></li><li class="share-pocket"><a rel="nofollow" data-shared="" class="share-pocket sd-button share-icon no-text" href="http://stm32f4-discovery.net/2014/05/stm32f4-stm32f429-discovery-pwm-tutorial/?share=pocket&amp;nb=1" target="_blank" title="Click to share on Pocket"><span></span><span class="sharing-screen-reader-text">Click to share on Pocket (Opens in new window)</span></a></li><li class="share-end"></li></ul></div></div></div>													</div>
						<div class="clear"></div>	
					</div><!--/.entry-->
				</div><!--/.post-inner-->	
			</article><!--/.post-->		
				<div class="clear"></div>
		<p class="post-tags"><span>Tags:</span> <a href="http://stm32f4-discovery.net/tag/168mhz/" rel="tag">168MHz</a><a href="http://stm32f4-discovery.net/tag/gpio/" rel="tag">gpio</a><a href="http://stm32f4-discovery.net/tag/keil/" rel="tag">keil</a><a href="http://stm32f4-discovery.net/tag/microcontrollers/" rel="tag">microcontrollers</a><a href="http://stm32f4-discovery.net/tag/pwm/" rel="tag">pwm</a><a href="http://stm32f4-discovery.net/tag/stm32f4-discovery/" rel="tag">STM32F4 discovery</a><a href="http://stm32f4-discovery.net/tag/stm32f429-2/" rel="tag">stm32f429</a><a href="http://stm32f4-discovery.net/tag/stm32f429discovery/" rel="tag">stm32f429discovery</a><a href="http://stm32f4-discovery.net/tag/stm32f4xx/" rel="tag">stm32f4xx</a><a href="http://stm32f4-discovery.net/tag/tim1/" rel="tag">Tim1</a><a href="http://stm32f4-discovery.net/tag/tim10/" rel="tag">tim10</a><a href="http://stm32f4-discovery.net/tag/tim11/" rel="tag">tim11</a><a href="http://stm32f4-discovery.net/tag/tim12/" rel="tag">tim12</a><a href="http://stm32f4-discovery.net/tag/tim13/" rel="tag">tim13</a><a href="http://stm32f4-discovery.net/tag/tim14/" rel="tag">tim14</a><a href="http://stm32f4-discovery.net/tag/tim2/" rel="tag">tim2</a><a href="http://stm32f4-discovery.net/tag/tim3/" rel="tag">tim3</a><a href="http://stm32f4-discovery.net/tag/tim4/" rel="tag">tim4</a><a href="http://stm32f4-discovery.net/tag/tim5/" rel="tag">tim5</a><a href="http://stm32f4-discovery.net/tag/tim6/" rel="tag">tim6</a><a href="http://stm32f4-discovery.net/tag/tim7/" rel="tag">Tim7</a><a href="http://stm32f4-discovery.net/tag/tim8/" rel="tag">tim8</a><a href="http://stm32f4-discovery.net/tag/tim9/" rel="tag">tim9</a><a href="http://stm32f4-discovery.net/tag/timers/" rel="tag">timers</a><a href="http://stm32f4-discovery.net/tag/uvision/" rel="tag">uvision</a></p>					<div class="author-bio">
				<div class="bio-avatar"><img alt="" src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/20e38b943a60140829036a9276290557" srcset="http://2.gravatar.com/avatar/20e38b943a60140829036a9276290557?s=256&amp;d=wavatar&amp;r=g 2x" class="avatar avatar-128 photo grav-hashed grav-hijack" height="128" width="128" id="grav-20e38b943a60140829036a9276290557-0"></div>
				<p class="bio-name">tilz0R</p>
				<p class="bio-desc">Owner of this site. Also electronic enthusiasts, web developer, 3D printer fan, handball player and more.
Big fan of STM32F4 devices. In anticipation of the new Discovery board for STM32F7 lines.</p>
				<div class="clear"></div>
			</div>
				
		<script async="" src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
		<!-- stm-post-each -->
		<ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-1510671897088135" data-ad-slot="7273044205" data-ad-format="auto"></ins>
		<script>
		(adsbygoogle = window.adsbygoogle || []).push({});
		</script>

				

<h4 class="heading">
	<i class="fa fa-hand-o-right"></i>You may also like...</h4>

<ul class="related-posts group">
	
		<li class="related post-hover">
		<article class="post-1413 post type-post status-publish format-standard hentry category-stm32f4-2 category-tutorials tag-file tag-fprintf tag-output tag-pointer tag-printf tag-sprintf tag-stm32f4 tag-stream tag-tutorial">

			<div class="post-thumbnail">
				<a href="http://stm32f4-discovery.net/2014/10/use-printf-output-stream-stm32f4/" title="Use printf to output stream on STM32F4">
											<img src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/thumb-medium.png" alt="Use printf to output stream on STM32F4">
																								</a>
									<a class="post-comments" href="http://stm32f4-discovery.net/2014/10/use-printf-output-stream-stm32f4/#comments"><span data-disqus-identifier="1413 http://stm32f4-discovery.com/?p=1413"><i class="fa fa-comments-o"></i><span class="dsq-postid" data-dsqidentifier="1413 http://stm32f4-discovery.com/?p=1413">41</span></span></a>
							</div><!--/.post-thumbnail-->
			
			<div class="related-inner">
				
				<h4 class="post-title">
					<a href="http://stm32f4-discovery.net/2014/10/use-printf-output-stream-stm32f4/" rel="bookmark" title="Use printf to output stream on STM32F4">Use printf to output stream on STM32F4</a>
				</h4><!--/.post-title-->
				
				<div class="post-meta group">
					<p class="post-date">19 Oct, 2014</p>
				</div><!--/.post-meta-->
			
			</div><!--/.related-inner-->

		</article>
	</li><!--/.related-->
		<li class="related post-hover">
		<article class="post-853 post type-post status-publish format-standard hentry category-stm32f4-2 category-stm32f4-discovery-2 category-stm32f429 category-stm32f429-discovery tag-com tag-com-port tag-full-speed tag-full-speed-mode tag-high-speed tag-high-speed-mode tag-port tag-stm32f4 tag-stm32f4-discovery tag-stm32f429-discovery tag-stm32f4xx tag-stmicroelectronics tag-usb-cdc tag-usb-device tag-usb-full-speed tag-usb-high-speed tag-usb-on-the-go tag-usb-to-rs232 tag-vcp tag-virtual tag-virtual-com-port">

			<div class="post-thumbnail">
				<a href="http://stm32f4-discovery.net/2014/08/library-24-virtual-com-port-vcp-stm32f4xx/" title="Library 24- Virtual COM Port (VCP) for STM32F4">
											<img src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/thumb-medium.png" alt="Library 24- Virtual COM Port (VCP) for STM32F4">
																								</a>
									<a class="post-comments" href="http://stm32f4-discovery.net/2014/08/library-24-virtual-com-port-vcp-stm32f4xx/#comments"><span><i class="fa fa-comments-o"></i><span class="dsq-postid" data-dsqidentifier="853 http://stm32f4-discovery.com/?p=853">408</span></span></a>
							</div><!--/.post-thumbnail-->
			
			<div class="related-inner">
				
				<h4 class="post-title">
					<a href="http://stm32f4-discovery.net/2014/08/library-24-virtual-com-port-vcp-stm32f4xx/" rel="bookmark" title="Library 24- Virtual COM Port (VCP) for STM32F4">Library 24- Virtual COM Port (VCP) for STM32F4</a>
				</h4><!--/.post-title-->
				
				<div class="post-meta group">
					<p class="post-date">3 Aug, 2014</p>
				</div><!--/.post-meta-->
			
			</div><!--/.related-inner-->

		</article>
	</li><!--/.related-->
		<li class="related post-hover">
		<article class="post-2460 post type-post status-publish format-standard hentry category-stm32f4-2 category-stm32f4-discovery-2 category-stm32f429 category-stm32f429-discovery tag-discovery tag-library tag-loop tag-nucleo tag-phase tag-phase-locked-loop tag-pll tag-rcc tag-speed tag-stm32f4 tag-stm32f429-2">

			<div class="post-thumbnail">
				<a href="http://stm32f4-discovery.net/2015/05/library-59-change-pll-settings-while-stm32f4xx-is-running/" title="Library 59- Change PLL settings while STM32F4xx is running">
											<img src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/thumb-medium.png" alt="Library 59- Change PLL settings while STM32F4xx is running">
																								</a>
									<a class="post-comments" href="http://stm32f4-discovery.net/2015/05/library-59-change-pll-settings-while-stm32f4xx-is-running/#comments"><span><i class="fa fa-comments-o"></i><span class="dsq-postid" data-dsqidentifier="2460 http://stm32f4-discovery.com/?p=2460">4</span></span></a>
							</div><!--/.post-thumbnail-->
			
			<div class="related-inner">
				
				<h4 class="post-title">
					<a href="http://stm32f4-discovery.net/2015/05/library-59-change-pll-settings-while-stm32f4xx-is-running/" rel="bookmark" title="Library 59- Change PLL settings while STM32F4xx is running">Library 59- Change PLL settings while STM32F4xx is running</a>
				</h4><!--/.post-title-->
				
				<div class="post-meta group">
					<p class="post-date">22 May, 2015</p>
				</div><!--/.post-meta-->
			
			</div><!--/.related-inner-->

		</article>
	</li><!--/.related-->
		
</ul><!--/.post-related-->

		<div class="entry">
	<h1 style="font-size: 48px; margin-bottom: 30px;">Read before commenting!</h1>
	<blockquote>
	<p>Before you make a new comment, make sure you agree with things listed below:</p>
	<ul>
		<li> - Read post to make sure if it is already posted what you are asking for,</li>
		<li> - Make sure you have the latest version of libraries used in your project,</li>
		<li> - Make a clean and grammatically correct written message,</li>
		<li> - Report as many details as possible, including what have you done so far,</li>
		<li> - Do NOT post any code here. Use <a href="http://pastebin.net/" target="_blank">Pastebin</a>,</li>
		<li> - Do NOT post any error codes here. Use <a href="http://pastebin.net/" target="_blank">Pastebin</a>,</li>
		<li> - Specify STM32Fxxx family and used Discovery/EVAL/Nucleo or custom made board,</li>
		<li> - Make sure your clock is set correct for PLL,</li>
		<li> - If you are using my HAL drivers, please <a href="http://stm32f4-discovery.com/2015/07/new-library-system-built-on-stm32fxxx-hal-drivers/" target="_new">check this post</a> how to start.</li>
	</ul>
	<strong>Comment will be deleted on breaking these rules without notification!</strong>
	<hr>
	</blockquote>
</div>		
		<div style="text-align: center;">
			<script async="" src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
			<!-- stm-after-comments-text -->
			<ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-1510671897088135" data-ad-slot="9129723802" data-ad-format="auto"></ins>
			<script>
			(adsbygoogle = window.adsbygoogle || []).push({});
			</script>
		</div>
		
<div id="disqus_thread"><iframe id="dsq-app2" name="dsq-app2" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" width="100%" src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/saved_resource.html" style="width: 1px !important; min-width: 100% !important; border: none !important; overflow: hidden !important; height: 8338px !important;" horizontalscrolling="no" verticalscrolling="no"></iframe></div>

<script type="text/javascript">
var disqus_url = 'http://stm32f4-discovery.net/2014/05/stm32f4-stm32f429-discovery-pwm-tutorial/';
var disqus_identifier = '389 http://stm32f4-discovery.com/?p=389';
var disqus_container_id = 'disqus_thread';
var disqus_shortname = 'stm32f4discoverycom';
var disqus_title = "STM32F4 PWM tutorial with TIMERs";
var disqus_config_custom = window.disqus_config;
var disqus_config = function () {
    /*
    All currently supported events:
    onReady: fires when everything is ready,
    onNewComment: fires when a new comment is posted,
    onIdentify: fires when user is authenticated
    */
    
    this.page.remote_auth_s3 = 'W10= d0a7ed09f41b39f1c8477f7a59a168d73c47c289 1464617987';
this.page.api_key = 'ranKhgBTfmyiUFQrEWKF9LvVYvZ4YSq1BdFYTZ3u3hcfBrOM6vsl9v5rNMuKDUjx';
this.sso = {
          name: "STM32F4 Discovery",
          button: "",
          url: "http://stm32f4-discovery.net/wp-login.php",
          logout: "http://stm32f4-discovery.net/wp-login.php?action=logout",
          width: "800",
          height: "700"
    };
    this.language = '';
        this.callbacks.onReady.push(function () {

        // sync comments in the background so we don't block the page
        var script = document.createElement('script');
        script.async = true;
        script.src = '?cf_action=sync_comments&post_id=389';

        var firstScript = document.getElementsByTagName('script')[0];
        firstScript.parentNode.insertBefore(script, firstScript);
    });
    
    if (disqus_config_custom) {
        disqus_config_custom.call(this);
    }
};

(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>

	</div><!--/.pad-->
</section><!--/.content-->

	<div class="sidebar s1">
		
		<a class="sidebar-toggle" title="Expand Sidebar"><i class="fa icon-sidebar-toggle"></i></a>
		
		<div class="sidebar-content">
			
						<div class="sidebar-top group">
				<p>Follow:</p>
				<ul class="social-links"><li><a rel="nofollow" class="social-tooltip" title="Facebook" href="http://www.facebook.com/Majerle19" target="Array"><i class="fa fa-facebook"></i></a></li><li><a rel="nofollow" class="social-tooltip" title="Twitter" href="https://twitter.com/tilz0R" target="Array"><i class="fa fa-twitter-square"></i></a></li><li><a rel="nofollow" class="social-tooltip" title="LinkedIn" href="https://www.linkedin.com/pub/tilen-majerle/7/697/85a" target="Array"><i class="fa fa-linkedin"></i></a></li><li><a rel="nofollow" class="social-tooltip" title="Google+" href="http:" target="Array"><i class="fa fa-google-plus"></i></a></li><li><a rel="nofollow" class="social-tooltip" title="Github" href="http://github.com/majerle19" target="Array"><i class="fa fa-github-square"></i></a></li><li><a rel="nofollow" class="social-tooltip" title="Instagram" href="https://instagram.com/majerle19/"><i class="fa fa-instagram"></i></a></li></ul>			</div>
						
				<ul class="post-nav group">
		<li class="next"><a href="http://stm32f4-discovery.net/2014/05/library-12-onewire-library-for-stm43f4xx/" rel="next"><i class="fa fa-chevron-right"></i><strong>Next story</strong> <span>Library 12- OneWire library for STM32F4</span></a></li>
		<li class="previous"><a href="http://stm32f4-discovery.net/2014/05/library-11-button-library-for-ili9341-lcd-and-stmpe811-touch-controller-on-stm32f429-discovery-board/" rel="prev"><i class="fa fa-chevron-left"></i><strong>Previous story</strong> <span>Library 11- Button library for ILI9341 LCD and STMPE811 touch controller on STM32F429 Discovery board</span></a></li>
	</ul>
			
						
			<div id="top-posts-3" class="widget widget_top-posts"><h3>Top posts</h3><ul>				<li>
										<a href="http://stm32f4-discovery.net/2014/05/all-stm32f429-libraries-at-one-place/" class="bump-view" data-bump-view="tp">
						All STM32F4 libraries					</a>
									</li>
							<li>
										<a href="http://stm32f4-discovery.net/2014/09/stm32f4-tutorials-one-place/" class="bump-view" data-bump-view="tp">
						All STM32F4 tutorials					</a>
									</li>
							<li>
										<a href="http://stm32f4-discovery.net/2014/05/stm32f4-stm32f429-discovery-pwm-tutorial/" class="bump-view" data-bump-view="tp">
						STM32F4 PWM tutorial with TIMERs					</a>
									</li>
							<li>
										<a href="http://stm32f4-discovery.net/2014/07/library-21-read-sd-card-fatfs-stm32f4xx-devices/" class="bump-view" data-bump-view="tp">
						Library 21- Read SD card with FatFs on STM32F4					</a>
									</li>
							<li>
										<a href="http://stm32f4-discovery.net/2015/07/all-stm32-hal-libraries/" class="bump-view" data-bump-view="tp">
						All STM32 HAL libraries					</a>
									</li>
							<li>
										<a href="http://stm32f4-discovery.net/2014/04/library-04-connect-stm32f429-discovery-to-computer-with-usart/" class="bump-view" data-bump-view="tp">
						Library 04- USART for STM32F4					</a>
									</li>
			</ul></div><div id="recent-comments-3" class="widget widget_recent_comments"><h3>Recent comments</h3><ul id="recentcomments"><li class="recentcomments"><span class="comment-author-link">Hassan</span> on <a href="http://stm32f4-discovery.net/2014/08/library-24-virtual-com-port-vcp-stm32f4xx/#comment-5115">Library 24- Virtual COM Port (VCP) for STM32F4</a></li><li class="recentcomments"><span class="comment-author-link">Harshit Kumar</span> on <a href="http://stm32f4-discovery.net/2014/07/library-21-read-sd-card-fatfs-stm32f4xx-devices/#comment-5114">Library 21- Read SD card with FatFs on STM32F4</a></li><li class="recentcomments"><span class="comment-author-link"><a href="http://majerle.eu/" rel="external nofollow" class="url">Majerle Tilen</a></span> on <a href="http://stm32f4-discovery.net/2014/07/library-21-read-sd-card-fatfs-stm32f4xx-devices/#comment-5113">Library 21- Read SD card with FatFs on STM32F4</a></li><li class="recentcomments"><span class="comment-author-link">Harshit Kumar</span> on <a href="http://stm32f4-discovery.net/2014/07/library-21-read-sd-card-fatfs-stm32f4xx-devices/#comment-5112">Library 21- Read SD card with FatFs on STM32F4</a></li><li class="recentcomments"><span class="comment-author-link">Андрей</span> on <a href="http://stm32f4-discovery.net/2014/08/library-24-virtual-com-port-vcp-stm32f4xx/#comment-5111">Library 24- Virtual COM Port (VCP) for STM32F4</a></li></ul></div><div id="categories-3" class="widget widget_categories"><h3>Categories</h3>		<ul>
	<li class="cat-item cat-item-727"><a href="http://stm32f4-discovery.net/category/arm-cortex-m/">ARM Cortex-M</a>
</li>
	<li class="cat-item cat-item-820"><a href="http://stm32f4-discovery.net/category/random/">Random</a>
</li>
	<li class="cat-item cat-item-68"><a href="http://stm32f4-discovery.net/category/stm32f4-2/">STM32F4</a>
</li>
	<li class="cat-item cat-item-74"><a href="http://stm32f4-discovery.net/category/stm32f4-discovery-2/">STM32F4 Discovery</a>
</li>
	<li class="cat-item cat-item-67"><a href="http://stm32f4-discovery.net/category/stm32f429/">STM32F429</a>
</li>
	<li class="cat-item cat-item-3"><a href="http://stm32f4-discovery.net/category/stm32f429-discovery/" title="All about STM32F429 DIscovery board.">STM32F429 Discovery</a>
</li>
	<li class="cat-item cat-item-747"><a href="http://stm32f4-discovery.net/category/stm32f7/">STM32F7</a>
</li>
	<li class="cat-item cat-item-738"><a href="http://stm32f4-discovery.net/category/stm32f7-discovery/">STM32F7 Discovery</a>
</li>
	<li class="cat-item cat-item-109"><a href="http://stm32f4-discovery.net/category/tutorials/">Tutorials</a>
</li>
	<li class="cat-item cat-item-1"><a href="http://stm32f4-discovery.net/category/uncategorized/">Uncategorized</a>
</li>
		</ul>
</div><div class="googlepublisherpluginad" style="text-align: center; width: 100%; height: auto; clear: none;"><ins class="adsbygoogle" data-ad-client="ca-pub-1510671897088135" data-ad-format="auto" data-tag-origin="pso" data-ad-slot="6044623402" data-ad-channel="WordPressSinglePost+pso-lv-10" style="display: block; margin: 10px auto; background-color: transparent;"></ins></div>		<div id="recent-posts-2" class="widget widget_recent_entries">		<h3>Recent posts</h3>		<ul>
					<li>
				<a href="http://stm32f4-discovery.net/2016/04/hal-library-33-dma-extension-for-spi-on-stm32fxxx/">HAL Library 33- DMA extension for SPI on STM32Fxxx</a>
						</li>
					<li>
				<a href="http://stm32f4-discovery.net/2016/04/hal-library-32-dma-extension-for-usart-on-stm32fxxx/">HAL Library 32- DMA extension for USART on STM32Fxxx</a>
						</li>
					<li>
				<a href="http://stm32f4-discovery.net/2016/04/hal-library-31-dma-stm32fxxx-devices/">HAL Library 31- DMA for STM32Fxxx devices</a>
						</li>
					<li>
				<a href="http://stm32f4-discovery.net/2016/01/esp8266-at-commands-parser/">ESP8266 AT Commands parser</a>
						</li>
					<li>
				<a href="http://stm32f4-discovery.net/2016/01/esp8266-at-parser-library-beta-version-released/">ESP8266 AT parser library ALPHA version released</a>
						</li>
					<li>
				<a href="http://stm32f4-discovery.net/2015/12/at-commands-parser-for-esp8266/">AT commands parser for ESP8266</a>
						</li>
				</ul>
		</div>		<div id="calendar-2" class="widget widget_calendar"><h3>Calendar</h3><div id="calendar_wrap" class="calendar_wrap"><table id="wp-calendar">
	<caption>May 2014</caption>
	<thead>
	<tr class="alt">
		<th scope="col" title="Monday">M</th>
		<th scope="col" title="Tuesday">T</th>
		<th scope="col" title="Wednesday">W</th>
		<th scope="col" title="Thursday">T</th>
		<th scope="col" title="Friday">F</th>
		<th scope="col" title="Saturday">S</th>
		<th scope="col" title="Sunday">S</th>
	</tr>
	</thead>

	<tfoot>
	<tr>
		<td colspan="3" id="prev"><a href="http://stm32f4-discovery.net/2014/04/">« Apr</a></td>
		<td class="pad">&nbsp;</td>
		<td colspan="3" id="next"><a href="http://stm32f4-discovery.net/2014/06/">Jun »</a></td>
	</tr>
	</tfoot>

	<tbody>
	<tr class="alt">
		<td colspan="3" class="pad">&nbsp;</td><td><a href="http://stm32f4-discovery.net/2014/05/01/" aria-label="Posts published on May 1, 2014">1</a></td><td><a href="http://stm32f4-discovery.net/2014/05/02/" aria-label="Posts published on May 2, 2014">2</a></td><td><a href="http://stm32f4-discovery.net/2014/05/03/" aria-label="Posts published on May 3, 2014">3</a></td><td>4</td>
	</tr>
	<tr>
		<td>5</td><td>6</td><td>7</td><td>8</td><td>9</td><td>10</td><td><a href="http://stm32f4-discovery.net/2014/05/11/" aria-label="Posts published on May 11, 2014">11</a></td>
	</tr>
	<tr class="alt">
		<td>12</td><td>13</td><td>14</td><td>15</td><td>16</td><td><a href="http://stm32f4-discovery.net/2014/05/17/" aria-label="Posts published on May 17, 2014">17</a></td><td><a href="http://stm32f4-discovery.net/2014/05/18/" aria-label="Posts published on May 18, 2014">18</a></td>
	</tr>
	<tr>
		<td>19</td><td>20</td><td>21</td><td>22</td><td>23</td><td>24</td><td>25</td>
	</tr>
	<tr class="alt">
		<td><a href="http://stm32f4-discovery.net/2014/05/26/" aria-label="Posts published on May 26, 2014">26</a></td><td><a href="http://stm32f4-discovery.net/2014/05/27/" aria-label="Posts published on May 27, 2014">27</a></td><td>28</td><td>29</td><td>30</td><td>31</td>
		<td class="pad" colspan="1">&nbsp;</td>
	</tr>
	</tbody>
	</table></div></div><div id="archives-3" class="widget widget_archive"><h3>Archives</h3>		<ul>
			<li><a href="http://stm32f4-discovery.net/2016/04/">April 2016</a></li>
	<li><a href="http://stm32f4-discovery.net/2016/01/">January 2016</a></li>
	<li><a href="http://stm32f4-discovery.net/2015/12/">December 2015</a></li>
	<li><a href="http://stm32f4-discovery.net/2015/11/">November 2015</a></li>
	<li><a href="http://stm32f4-discovery.net/2015/10/">October 2015</a></li>
	<li><a href="http://stm32f4-discovery.net/2015/09/">September 2015</a></li>
	<li><a href="http://stm32f4-discovery.net/2015/08/">August 2015</a></li>
	<li><a href="http://stm32f4-discovery.net/2015/07/">July 2015</a></li>
	<li><a href="http://stm32f4-discovery.net/2015/06/">June 2015</a></li>
	<li><a href="http://stm32f4-discovery.net/2015/05/">May 2015</a></li>
	<li><a href="http://stm32f4-discovery.net/2015/04/">April 2015</a></li>
	<li><a href="http://stm32f4-discovery.net/2015/03/">March 2015</a></li>
	<li><a href="http://stm32f4-discovery.net/2015/02/">February 2015</a></li>
	<li><a href="http://stm32f4-discovery.net/2015/01/">January 2015</a></li>
	<li><a href="http://stm32f4-discovery.net/2014/12/">December 2014</a></li>
	<li><a href="http://stm32f4-discovery.net/2014/11/">November 2014</a></li>
	<li><a href="http://stm32f4-discovery.net/2014/10/">October 2014</a></li>
	<li><a href="http://stm32f4-discovery.net/2014/09/">September 2014</a></li>
	<li><a href="http://stm32f4-discovery.net/2014/08/">August 2014</a></li>
	<li><a href="http://stm32f4-discovery.net/2014/07/">July 2014</a></li>
	<li><a href="http://stm32f4-discovery.net/2014/06/">June 2014</a></li>
	<li><a href="http://stm32f4-discovery.net/2014/05/">May 2014</a></li>
	<li><a href="http://stm32f4-discovery.net/2014/04/">April 2014</a></li>
		</ul>
		</div>			
		</div><!--/.sidebar-content-->
		
	</div><!--/.sidebar-->

	
<div class="sidebar s2">
	
	<a class="sidebar-toggle" title="Expand Sidebar"><i class="fa icon-sidebar-toggle"></i></a>
	
	<div class="sidebar-content">
		
				<div class="sidebar-top group">
			<p>More</p>
		</div>
				
				
		<div id="email-subscribers-2" class="widget widget_text elp-widget"><h3>Subscribe</h3>
		<div>
			<form class="es_widget_form">
							<div class="es_caption">Subscribe if you want to be notified about new posts and other events on this site.</div>
								<div class="es_msg"><span id="es_msg"></span></div>
								<div class="es_lablebox">Name</div>
				<div class="es_textbox">
					<input class="es_textbox_class" name="es_txt_name" id="es_txt_name" value="" maxlength="225" type="text">
				</div>
								<div class="es_lablebox">Email *</div>
				<div class="es_textbox">
					<input class="es_textbox_class" name="es_txt_email" id="es_txt_email" onkeypress="if(event.keyCode==13) es_submit_page(&#39;http://stm32f4-discovery.net&#39;)" value="" maxlength="225" type="text">
				</div>
				<div class="es_button">
					<input class="es_textbox_button" name="es_txt_button" id="es_txt_button" onclick="return es_submit_page(&#39;http://stm32f4-discovery.net&#39;)" value="Subscribe" type="button">
				</div>
								<input name="es_txt_group" id="es_txt_group" value="" type="hidden">
			</form>
		</div>
		</div><div id="polls-widget-2" class="widget widget_polls-widget"><h3>Poll</h3><div id="polls-3" class="wp-polls">
	<form id="polls_form_3" class="wp-polls-form" action="http://stm32f4-discovery.net/index.php" method="post">
		<p style="display: none;"><input type="hidden" id="poll_3_nonce" name="wp-polls-nonce" value="5467b7960d"></p>
		<p style="display: none;"><input type="hidden" name="poll_id" value="3"></p>
		<p style="text-align: center;"><strong>Standard peripheral drivers vs HAL drivers</strong></p><div id="polls-3-ans" class="wp-polls-ans"><ul class="wp-polls-ul">
		<li><input type="radio" id="poll-answer-10" name="poll_3" value="10"> <label for="poll-answer-10">I like standard peripheral drivers and I want to stay on them.</label></li>
		<li><input type="radio" id="poll-answer-11" name="poll_3" value="11"> <label for="poll-answer-11">I want to start with new HAL system</label></li>
		<li><input type="radio" id="poll-answer-12" name="poll_3" value="12"> <label for="poll-answer-12">What are standard peripheral drivers?</label></li>
		<li><input type="radio" id="poll-answer-13" name="poll_3" value="13"> <label for="poll-answer-13">What are HAL drivers?</label></li>
		</ul><p style="text-align: center;"><input type="button" name="vote" value="   Vote   " class="Buttons" onclick="poll_vote(3);"></p><p style="text-align: center;"><a href="http://stm32f4-discovery.net/2014/05/stm32f4-stm32f429-discovery-pwm-tutorial/#ViewPollResults" onclick="poll_result(3); return false;" title="View Results Of This Poll">View Results</a></p></div>
	</form>
</div>
<div id="polls-3-loading" class="wp-polls-loading"><img src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/loading.gif" width="16" height="16" alt="Loading ..." title="Loading ..." class="wp-polls-image">&nbsp;Loading ...</div>
</div><div id="text-6" class="widget widget_text"><h3>Support us</h3>			<div class="textwidget"><div id="paypal_support_widget">
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="2PXJU4N6NGJD2">
<input type="image" src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/btn_donateCC_LG.gif" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="paypal" src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/pixel.gif" width="1" height="1">
</form>
</div></div>
		</div><div id="search-2" class="widget widget_search"><h3>Search</h3><form method="get" class="searchform themeform" action="http://stm32f4-discovery.net/">
	<div>
		<input type="text" class="search" name="s" onblur="if(this.value==&#39;&#39;)this.value=&#39;To search type and hit enter&#39;;" onfocus="if(this.value==&#39;To search type and hit enter&#39;)this.value=&#39;&#39;;" value="To search type and hit enter">
	</div>
</form></div><div id="text-4" class="widget widget_text"><h3>Twitter</h3>			<div class="textwidget"><iframe id="twitter-widget-0" scrolling="no" frameborder="0" allowtransparency="true" allowfullscreen="true" class="twitter-timeline twitter-timeline-rendered" style="position: static; visibility: visible; display: inline-block; width: 520px; height: 600px; padding: 0px; border: none; max-width: 100%; min-width: 180px; margin-top: 0px; margin-bottom: 0px; min-height: 200px;" data-widget-id="465580122179792896" title="Twitter Timeline" src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/saved_resource(2).html"></iframe>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</div>
		</div><div id="text-5" class="widget widget_text"><h3>Google+</h3>			<div class="textwidget"><!-- Place this tag where you want the widget to render. -->
<div id="___person_0" style="text-indent: 0px; margin: 0px; padding: 0px; border-style: none; float: none; line-height: normal; font-size: 1px; vertical-align: baseline; display: inline-block; width: 250px; height: 313px; background: transparent;"><iframe frameborder="0" hspace="0" marginheight="0" marginwidth="0" scrolling="no" style="position: static; top: 0px; width: 250px; margin: 0px; border-style: none; left: 0px; visibility: visible; height: 313px;" tabindex="0" vspace="0" width="100%" id="I0_1464618358542" name="I0_1464618358542" src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/person.html" data-gapiattached="true" title="+Badge"></iframe></div>

<!-- Place this tag after the last widget tag. -->
<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/platform.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>
<a href="https://plus.google.com/+TilenMajerle/posts" rel="author" target="blank">Follow me on Google+</a></div>
		</div>		
	</div><!--/.sidebar-content-->
	
</div><!--/.sidebar-->	
				</div><!--/.main-inner-->

			</div><!--/.main-->			

		</div><!--/.container-inner-->

	</div><!--/.container-->



	<footer id="footer">

		


		<section class="container" id="footer-ads">

			<div class="container-inner">

<script async="" src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- stm-bottom-big -->
<ins class="adsbygoogle" style="display:inline-block;width:728px;height:90px" data-ad-client="ca-pub-1510671897088135" data-ad-slot="9563166201"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>


			</div><!--/.container-inner-->

		</section><!--/.container-->

		

		
		

		
			<nav class="nav-container group" id="nav-footer">

				<div class="nav-toggle"><i class="fa fa-bars"></i></div>

				<div class="nav-text"><!-- put your mobile menu text here --></div>

				<div class="nav-wrap"><ul id="menu-top-menu-1" class="nav container group"><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-424"><a title="Contact me" href="http://stm32f4-discovery.net/about/">About</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-1317"><a title="View me on LinkedIn" target="_blank" href="http://si.linkedin.com/pub/tilen-majerle/7/697/85a">LinkedIn</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-422"><a title="Follow me on Twitter" target="_blank" href="https://twitter.com/tilz0R">Twitter</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-423"><a title="Follow me on Google+" target="_blank" href="https://plus.google.com/+TilenMajerle?rel=author">Google+</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-844"><a title="Follow me on Facebook" target="_blank" href="https://www.facebook.com/Majerle19">Facebook</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-425"><a title="My Github account" target="_blank" href="https://github.com/MaJerle">Github</a></li>
<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-2391"><a title="Follow me on Instagram" target="_blank" href="https://instagram.com/majerle19">Instagram</a></li>
</ul></div>

			</nav><!--/#nav-footer-->

		
		

		<section class="container" id="footer-bottom">

			<div class="container-inner">

				

				<a id="back-to-top" href="http://stm32f4-discovery.net/2014/05/stm32f4-stm32f429-discovery-pwm-tutorial/#"><i class="fa fa-angle-up"></i></a>

				

				<div class="pad group">

					

					<div class="grid one-half">

						

						
						

						<div id="copyright">

							
								<p>STM32F4 Discovery © 2016. All Rights Reserved.<br>Copying content from this site is stricly forbidden. This does not apply for library downloads.</p>

							
						</div><!--/#copyright-->

						

						
						

					</div>

					

					<div class="grid one-half last">	

						<ul class="social-links"><li><a rel="nofollow" class="social-tooltip" title="Facebook" href="http://www.facebook.com/Majerle19" target="Array"><i class="fa fa-facebook"></i></a></li><li><a rel="nofollow" class="social-tooltip" title="Twitter" href="https://twitter.com/tilz0R" target="Array"><i class="fa fa-twitter-square"></i></a></li><li><a rel="nofollow" class="social-tooltip" title="LinkedIn" href="https://www.linkedin.com/pub/tilen-majerle/7/697/85a" target="Array"><i class="fa fa-linkedin"></i></a></li><li><a rel="nofollow" class="social-tooltip" title="Google+" href="http:" target="Array"><i class="fa fa-google-plus"></i></a></li><li><a rel="nofollow" class="social-tooltip" title="Github" href="http://github.com/majerle19" target="Array"><i class="fa fa-github-square"></i></a></li><li><a rel="nofollow" class="social-tooltip" title="Instagram" href="https://instagram.com/majerle19/"><i class="fa fa-instagram"></i></a></li></ul>
					</div>

				

				</div><!--/.pad-->

				

			</div><!--/.container-inner-->

		</section><!--/.container-->

		

	</footer><!--/#footer-->



</div><!--/#wrapper-->



<div id="cookie-law-info-bar" style="display: block; color: rgb(0, 0, 0); font-family: inherit; bottom: 0px; border-top-width: 4px; border-top-style: solid; border-top-color: rgb(68, 68, 68); position: fixed; background-color: rgb(255, 255, 255);"><span>This website uses cookies to improve your experience. We'll assume you're ok with this, but you can opt-out if you wish.<a href="http://stm32f4-discovery.net/2014/05/stm32f4-stm32f429-discovery-pwm-tutorial/#" id="cookie_action_close_header" class="medium cli-plugin-button cli-plugin-main-button" style="color: rgb(255, 255, 255); background-color: rgb(0, 0, 0);">Accept</a> <a href="http://stm32f4-discovery.com/" id="CONSTANT_OPEN_URL" target="_blank" class="cli-plugin-main-link" style="color: rgb(68, 68, 68);">Read More</a></span></div><div id="cookie-law-info-again" style="color: rgb(0, 0, 0); position: fixed; font-family: inherit; border-top-width: 1px; border-right-width: 1px; border-left-width: 1px; border-style: solid solid none; border-top-color: rgb(68, 68, 68); border-right-color: rgb(68, 68, 68); border-left-color: rgb(68, 68, 68); bottom: 0px; right: 100px; display: none; background-color: rgb(255, 255, 255);"><span id="cookie_hdr_showagain">Privacy &amp; Cookies Policy</span></div>		
		<script type="text/javascript">
			//<![CDATA[
			jQuery(document).ready(function() {
				cli_show_cookiebar({
					settings: '{"animate_speed_hide":"500","animate_speed_show":"500","background":"#fff","border":"#444","border_on":true,"button_1_button_colour":"#000","button_1_button_hover":"#000000","button_1_link_colour":"#fff","button_1_as_button":true,"button_2_button_colour":"#333","button_2_button_hover":"#292929","button_2_link_colour":"#444","button_2_as_button":false,"font_family":"inherit","header_fix":false,"notify_animate_hide":false,"notify_animate_show":false,"notify_div_id":"#cookie-law-info-bar","notify_position_horizontal":"right","notify_position_vertical":"bottom","scroll_close":false,"scroll_close_reload":false,"showagain_tab":true,"showagain_background":"#fff","showagain_border":"#000","showagain_div_id":"#cookie-law-info-again","showagain_x_position":"100px","text":"#000","show_once_yn":false,"show_once":"10000"}'
				});
			});
			//]]>
		</script>
		
		        <script type="text/javascript">
        // <![CDATA[
        var disqus_shortname = 'stm32f4discoverycom';
        (function () {
            var nodes = document.getElementsByTagName('span');
            for (var i = 0, url; i < nodes.length; i++) {
                if (nodes[i].className.indexOf('dsq-postid') != -1) {
                    nodes[i].parentNode.setAttribute('data-disqus-identifier', nodes[i].getAttribute('data-dsqidentifier'));
                    url = nodes[i].parentNode.href.split('#', 1);
                    if (url.length == 1) { url = url[0]; }
                    else { url = url[1]; }
                    nodes[i].parentNode.href = url + '#disqus_thread';
                }
            }
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
        // ]]>
        </script>
        	<div style="display:none">
	<div class="grofile-hash-map-20e38b943a60140829036a9276290557">
	</div>
	</div>

	<script type="text/javascript">
		window.WPCOM_sharing_counts = {"http:\/\/stm32f4-discovery.net\/2014\/05\/stm32f4-stm32f429-discovery-pwm-tutorial\/":389};
	</script>
	
		<script type="text/javascript">
			var windowOpen;
		jQuery(document).on( 'ready post-load', function(){
			jQuery( 'a.share-facebook' ).on( 'click', function() {
				if ( 'undefined' !== typeof windowOpen ){ // If there's another sharing window open, close it.
					windowOpen.close();
				}
				windowOpen = window.open( jQuery(this).attr( 'href' ), 'wpcomfacebook', 'menubar=1,resizable=1,width=600,height=400' );
				return false;
			});
		});
		</script>
				<script type="text/javascript">
			var windowOpen;
		jQuery(document).on( 'ready post-load', function(){
			jQuery( 'a.share-google-plus-1' ).on( 'click', function() {
				if ( 'undefined' !== typeof windowOpen ){ // If there's another sharing window open, close it.
					windowOpen.close();
				}
				windowOpen = window.open( jQuery(this).attr( 'href' ), 'wpcomgoogle-plus-1', 'menubar=1,resizable=1,width=480,height=550' );
				return false;
			});
		});
		</script>
				<script type="text/javascript">
			var windowOpen;
		jQuery(document).on( 'ready post-load', function(){
			jQuery( 'a.share-twitter' ).on( 'click', function() {
				if ( 'undefined' !== typeof windowOpen ){ // If there's another sharing window open, close it.
					windowOpen.close();
				}
				windowOpen = window.open( jQuery(this).attr( 'href' ), 'wpcomtwitter', 'menubar=1,resizable=1,width=600,height=350' );
				return false;
			});
		});
		</script>
				<script type="text/javascript">
			var windowOpen;
		jQuery(document).on( 'ready post-load', function(){
			jQuery( 'a.share-linkedin' ).on( 'click', function() {
				if ( 'undefined' !== typeof windowOpen ){ // If there's another sharing window open, close it.
					windowOpen.close();
				}
				windowOpen = window.open( jQuery(this).attr( 'href' ), 'wpcomlinkedin', 'menubar=1,resizable=1,width=580,height=450' );
				return false;
			});
		});
		</script>
						<script type="text/javascript">
			var windowOpen;
		jQuery(document).on( 'ready post-load', function(){
			jQuery( 'a.share-tumblr' ).on( 'click', function() {
				if ( 'undefined' !== typeof windowOpen ){ // If there's another sharing window open, close it.
					windowOpen.close();
				}
				windowOpen = window.open( jQuery(this).attr( 'href' ), 'wpcomtumblr', 'menubar=1,resizable=1,width=450,height=450' );
				return false;
			});
		});
		</script>
				<script type="text/javascript">
			var windowOpen;
		jQuery(document).on( 'ready post-load', function(){
			jQuery( 'a.share-pocket' ).on( 'click', function() {
				if ( 'undefined' !== typeof windowOpen ){ // If there's another sharing window open, close it.
					windowOpen.close();
				}
				windowOpen = window.open( jQuery(this).attr( 'href' ), 'wpcompocket', 'menubar=1,resizable=1,width=450,height=450' );
				return false;
			});
		});
		</script>
		<script type="text/javascript" src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/jquery.form.min.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var _wpcf7 = {"loaderUrl":"http:\/\/stm32f4-discovery.net\/wp-content\/plugins\/contact-form-7\/images\/ajax-loader.gif","recaptchaEmpty":"Please verify that you are not a robot.","sending":"Sending ...","cached":"1"};
/* ]]> */
</script>
<script type="text/javascript" src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/scripts.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var es_widget_notices = {"es_email_notice":"Please enter email address.","es_incorrect_email":"Please provide a valid email address.","es_load_more":"loading...","es_ajax_error":"Cannot create XMLHTTP instance","es_success_message":"Subscribed successfully.","es_success_notice":"You have successfully subscribed to the newsletter. You will receive a confirmation email in a few minutes. Please follow the link in it to confirm your subscription. If the email takes more than 15 minutes to appear in your mailbox, please check your spam folder.","es_email_exists":"Email already exist.","es_error":"Oops.. Unexpected error occurred.","es_invalid_email":"Invalid email address.","es_try_later":"Please try after some time.","es_problem_request":"There was a problem with the request."};
/* ]]> */
</script>
<script type="text/javascript" src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/es-widget.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var es_widget_page_notices = {"es_email_notice":"Please enter email address.","es_incorrect_email":"Please provide a valid email address.","es_load_more":"loading...","es_ajax_error":"Cannot create XMLHTTP instance","es_success_message":"Subscribed successfully.","es_success_notice":"You have successfully subscribed to the newsletter. You will receive a confirmation email in a few minutes. Please follow the link in it to confirm your subscription. If the email takes more than 15 minutes to appear in your mailbox, please check your spam folder.","es_email_exists":"Email already exist.","es_error":"Oops.. Unexpected error occurred.","es_invalid_email":"Invalid email address.","es_try_later":"Please try after some time.","es_problem_request":"There was a problem with the request."};
/* ]]> */
</script>
<script type="text/javascript" src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/es-widget-page.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var pollsL10n = {"ajax_url":"http:\/\/stm32f4-discovery.net\/wp-admin\/admin-ajax.php","text_wait":"Your last request is still being processed. Please wait a while ...","text_valid":"Please choose a valid poll answer.","text_multiple":"Maximum number of choices allowed: ","show_loading":"1","show_fading":"1"};
/* ]]> */
</script>
<script type="text/javascript" src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/polls-js.js"></script>
<script type="text/javascript" src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/core.min.js"></script>
<script type="text/javascript" src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/masonry.min.js"></script>
<script type="text/javascript" src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/jquery.masonry.min.js"></script>
<script type="text/javascript" src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/devicepx-jetpack.js"></script>
<script type="text/javascript" src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/gprofiles.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type="text/javascript" src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/wpgroho.js"></script>
<script type="text/javascript" src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/scripts(1).js"></script>
<script type="text/javascript" src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/comment-reply.min.js"></script>
<script type="text/javascript" src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/wp-embed.min.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var sharing_js_options = {"lang":"en","counts":"1"};
/* ]]> */
</script>
<script type="text/javascript" src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/sharing.js"></script>
<!--[if lt IE 9]>
<script src="http://stm32f4-discovery.net/wp-content/themes/hueman/js/ie/respond.js"></script>
<![endif]-->
<script type="text/javascript" src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/e-201622.js" async="" defer=""></script>
<script type="text/javascript">
	_stq = window._stq || [];
	_stq.push([ 'view', {v:'ext',j:'1:4.0.2',blog:'68268430',post:'389',tz:'2',srv:'stm32f4-discovery.net'} ]);
	_stq.push([ 'clickTrackerInit', '68268430', '389' ]);
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-10025530-14', 'auto');
  ga('send', 'pageview');

</script>



<div id="sharing_email" style="display: none;">
		<form action="http://stm32f4-discovery.net/2014/05/stm32f4-stm32f429-discovery-pwm-tutorial/" method="post">
			<label for="target_email">Send to Email Address</label>
			<input type="email" name="target_email" id="target_email" value="">

			
				<label for="source_name">Your Name</label>
				<input type="text" name="source_name" id="source_name" value="">

				<label for="source_email">Your Email Address</label>
				<input type="email" name="source_email" id="source_email" value="">

						<input type="text" id="jetpack-source_f_name" name="source_f_name" class="input" value="" size="25" autocomplete="off">
			<script> document.getElementById('jetpack-source_f_name').value = ''; </script>
			
			<img style="float: right; display: none" class="loading" src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/loading(1).gif" alt="loading" width="16" height="16">
			<input type="submit" value="Send Email" class="sharing_send">
			<a rel="nofollow" href="http://stm32f4-discovery.net/2014/05/stm32f4-stm32f429-discovery-pwm-tutorial/#cancel" class="sharing_cancel">Cancel</a>

			<div class="errors errors-1" style="display: none;">
				Post was not sent - check your email addresses!			</div>

			<div class="errors errors-2" style="display: none;">
				Email check failed, please try again			</div>

			<div class="errors errors-3" style="display: none;">
				Sorry, your blog cannot share posts by email.			</div>
		</form>
	</div><img src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/g.gif" alt=":)" width="6" height="5" id="wpstats"><iframe name="oauth2relay701916366" id="oauth2relay701916366" src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/postmessageRelay.html" tabindex="-1" style="width: 1px; height: 1px; position: absolute; top: -100px;"></iframe><script aria-hidden="true" type="application/x-lastpass" id="hiddenlpsubmitdiv" style="display: none;"></script><script>try{(function() { for(var lastpass_iter=0; lastpass_iter < document.forms.length; lastpass_iter++){ var lastpass_f = document.forms[lastpass_iter]; if(typeof(lastpass_f.lpsubmitorig2)=="undefined"){ lastpass_f.lpsubmitorig2 = lastpass_f.submit; if (typeof(lastpass_f.lpsubmitorig2)=='object'){ continue;}lastpass_f.submit = function(){ var form=this; var customEvent = document.createEvent("Event"); customEvent.initEvent("lpCustomEvent", true, true); var d = document.getElementById("hiddenlpsubmitdiv"); if (d) {for(var i = 0; i < document.forms.length; i++){ if(document.forms[i]==form){ if (typeof(d.innerText) != 'undefined') { d.innerText=i.toString(); } else { d.textContent=i.toString(); } } } d.dispatchEvent(customEvent); }form.lpsubmitorig2(); } } }})()}catch(e){}</script><iframe id="rufous-sandbox" scrolling="no" frameborder="0" allowtransparency="true" allowfullscreen="true" style="position: absolute; visibility: hidden; display: none; width: 0px; height: 0px; padding: 0px; border: none;" src="./STM32F4 PWM tutorial with TIMERs - STM32F4 Discovery_files/saved_resource(3).html"></iframe></body></html>